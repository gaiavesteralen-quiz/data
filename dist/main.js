/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={444:(t,e,n)=>{"use strict";n.d(e,{BH:()=>d,DV:()=>k,GJ:()=>E,L:()=>l,LL:()=>y,Pz:()=>C,UI:()=>N,US:()=>s,X3:()=>W,Yr:()=>_,b$:()=>p,cI:()=>w,dS:()=>$,eu:()=>m,g5:()=>i,gK:()=>O,gQ:()=>A,h$:()=>a,hl:()=>g,hu:()=>r,m9:()=>M,p$:()=>c,r3:()=>S,uI:()=>f,ug:()=>L,vZ:()=>R,w9:()=>I,xO:()=>D,xb:()=>x});const r=function(t,e){if(!t)throw i(e)},i=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},o=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const i=t[e],o=e+1<t.length,s=o?t[e+1]:0,a=e+2<t.length,l=a?t[e+2]:0,u=i>>2,c=(3&i)<<4|s>>4;let h=(15&s)<<2|l>>6,d=63&l;a||(d=64,o||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){const i=n[t.charAt(e++)],o=e<t.length?n[t.charAt(e)]:0;++e;const s=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==i||null==o||null==s||null==a)throw Error();const l=i<<2|o>>4;if(r.push(l),64!==s){const t=o<<4&240|s>>2;if(r.push(t),64!==a){const t=s<<6&192|a;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},a=function(t){const e=o(t);return s.encodeByteArray(e,!0)},l=function(t){return a(t).replace(/\./g,"")},u=function(t){try{return s.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function f(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return!1}function g(){return"object"==typeof indexedDB}function m(){return new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class v extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,y.prototype.create)}}class y{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],o=i?function(t,e){return t.replace(b,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",s=`${this.serviceName}: ${o} (${r}).`;return new v(r,s,n)}}const b=/\{\$([^}]+)}/g;function w(t){return JSON.parse(t)}function C(t){return JSON.stringify(t)}const T=function(t){let e={},n={},r={},i="";try{const o=t.split(".");e=w(u(o[0])||""),n=w(u(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},I=function(t){const e=T(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},E=function(t){const e=T(t).claims;return"object"==typeof e&&!0===e.admin};function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function x(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function N(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function R(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],o=e[i];if(P(n)&&P(o)){if(!R(n,o))return!1}else if(n!==o)return!1}for(const t of r)if(!n.includes(t))return!1;return!0}function P(t){return null!==t&&"object"==typeof t}function D(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class A{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const n=this.W_;if("string"==typeof t)for(let r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let t=16;t<80;t++){const e=n[t-3]^n[t-8]^n[t-14]^n[t-16];n[t]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],s=this.chain_[1],a=this.chain_[2],l=this.chain_[3],u=this.chain_[4];for(let t=0;t<80;t++){t<40?t<20?(r=l^s&(a^l),i=1518500249):(r=s^a^l,i=1859775393):t<60?(r=s&a|l&(s|a),i=2400959708):(r=s^a^l,i=3395469782);const e=(o<<5|o>>>27)+r+u+i+n[t]&4294967295;u=l,l=a,a=4294967295&(s<<30|s>>>2),s=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(t,e){if(null==t)return;void 0===e&&(e=t.length);const n=e-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}digest(){const t=[];let e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let t=this.blockSize-1;t>=56;t--)this.buf_[t]=255&e,e/=256;this.compress_(this.buf_);let n=0;for(let e=0;e<5;e++)for(let r=24;r>=0;r-=8)t[n]=this.chain_[e]>>r&255,++n;return t}}function O(t,e){return`${t} failed: ${e} argument `}const $=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);if(o>=55296&&o<=56319){const e=o-55296;i++,r(i<t.length,"Surrogate pair missing trail surrogate."),o=65536+(e<<10)+(t.charCodeAt(i)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},L=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function M(t){return t&&t._delegate?t._delegate:t}function F(t,e){return new Promise(((n,r)=>{t.onsuccess=t=>{n(t.target.result)},t.onerror=t=>{var n;r(`${e}: ${null===(n=t.target.error)||void 0===n?void 0:n.message}`)}}))}class j{constructor(t){this._db=t,this.objectStoreNames=this._db.objectStoreNames}transaction(t,e="readonly"){return new q(this._db.transaction.call(this._db,t,e))}createObjectStore(t,e){return new U(this._db.createObjectStore(t,e))}close(){this._db.close()}}class q{constructor(t){this._transaction=t,this.complete=new Promise(((t,e)=>{this._transaction.oncomplete=function(){t()},this._transaction.onerror=()=>{e(this._transaction.error)},this._transaction.onabort=()=>{e(this._transaction.error)}}))}objectStore(t){return new U(this._transaction.objectStore(t))}}class U{constructor(t){this._store=t}index(t){return new z(this._store.index(t))}createIndex(t,e,n){return new z(this._store.createIndex(t,e,n))}get(t){return F(this._store.get(t),"Error reading from IndexedDB")}put(t,e){return F(this._store.put(t,e),"Error writing to IndexedDB")}delete(t){return F(this._store.delete(t),"Error deleting from IndexedDB")}clear(){return F(this._store.clear(),"Error clearing IndexedDB object store")}}class z{constructor(t){this._index=t}get(t){return F(this._index.get(t),"Error reading from IndexedDB")}}function W(t,e,n){return new Promise(((r,i)=>{try{const o=indexedDB.open(t,e);o.onsuccess=t=>{r(new j(t.target.result))},o.onerror=t=>{var e;i(`Error opening indexedDB: ${null===(e=t.target.error)||void 0===e?void 0:e.message}`)},o.onupgradeneeded=t=>{n(new j(o.result),t.oldVersion,t.newVersion,new q(o.transaction))}}catch(t){i(`Error opening indexedDB: ${t.message}`)}}))}},915:(t,e,n)=>{n(294),n(309),n(929),n(50),n(63),n(737),n(852),n(278),n(927),n(497),n(814),n(377)},377:()=>{!function(t){"use strict";var e=function(n,r){this.options=t.extend({},e.DEFAULTS,r);var i=this.options.target===e.DEFAULTS.target?t(this.options.target):t(document).find(this.options.target);this.$target=i.on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function n(n){return this.each((function(){var r=t(this),i=r.data("bs.affix"),o="object"==typeof n&&n;i||r.data("bs.affix",i=new e(this,o)),"string"==typeof n&&i[n]()}))}e.VERSION="3.4.1",e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0,target:window},e.prototype.getState=function(t,e,n,r){var i=this.$target.scrollTop(),o=this.$element.offset(),s=this.$target.height();if(null!=n&&"top"==this.affixed)return i<n&&"top";if("bottom"==this.affixed)return null!=n?!(i+this.unpin<=o.top)&&"bottom":!(i+s<=t-r)&&"bottom";var a=null==this.affixed,l=a?i:o.top;return null!=n&&i<=n?"top":null!=r&&l+(a?s:e)>=t-r&&"bottom"},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=this.$element.height(),r=this.options.offset,i=r.top,o=r.bottom,s=Math.max(t(document).height(),t(document.body).height());"object"!=typeof r&&(o=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var a=this.getState(s,n,i,o);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),u=t.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-n-o})}};var r=t.fn.affix;t.fn.affix=n,t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=r,this},t(window).on("load",(function(){t('[data-spy="affix"]').each((function(){var e=t(this),r=e.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),n.call(e,r)}))}))}(jQuery)},309:()=>{!function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.VERSION="3.4.1",n.TRANSITION_DURATION=150,n.prototype.close=function(e){var r=t(this),i=r.attr("data-target");i||(i=(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),i="#"===i?[]:i;var o=t(document).find(i);function s(){o.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),o.length||(o=r.closest(".alert")),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s())};var r=t.fn.alert;t.fn.alert=function(e){return this.each((function(){var r=t(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),"string"==typeof e&&i[e].call(r)}))},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=r,this},t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(jQuery)},929:()=>{!function(t){"use strict";var e=function(n,r){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,r),this.isLoading=!1};function n(n){return this.each((function(){var r=t(this),i=r.data("bs.button"),o="object"==typeof n&&n;i||r.data("bs.button",i=new e(this,o)),"toggle"==n?i.toggle():n&&i.setState(n)}))}e.VERSION="3.4.1",e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();e+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(t.proxy((function(){r[i](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,r.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n).prop(n,!1))}),this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=t.fn.button;t.fn.button=n,t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=r,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',(function(e){var r=t(e.target).closest(".btn");n.call(r,"toggle"),t(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),r.is("input,button")?r.trigger("focus"):r.find("input:visible,button:visible").first().trigger("focus"))})).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',(function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))}))}(jQuery)},50:()=>{!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};function n(n){return this.each((function(){var r=t(this),i=r.data("bs.carousel"),o=t.extend({},e.DEFAULTS,r.data(),"object"==typeof n&&n),s="string"==typeof n?n:o.slide;i||r.data("bs.carousel",i=new e(this,o)),"number"==typeof n?i.to(n):s?i[s]():o.interval&&i.pause().cycle()}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=600,e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},e.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},e.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e);if(("prev"==t&&0===n||"next"==t&&n==this.$items.length-1)&&!this.options.wrap)return e;var r=(n+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(r)},e.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",(function(){e.to(t)})):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){if(!this.sliding)return this.slide("next")},e.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},e.prototype.slide=function(n,r){var i=this.$element.find(".item.active"),o=r||this.getItemForDirection(n,i),s=this.interval,a="next"==n?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var u=o[0],c=t.Event("slide.bs.carousel",{relatedTarget:u,direction:a});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(o)]);h&&h.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:u,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(n),"object"==typeof o&&o.length&&o[0].offsetWidth,i.addClass(a),o.addClass(a),i.one("bsTransitionEnd",(function(){o.removeClass([n,a].join(" ")).addClass("active"),i.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout((function(){l.$element.trigger(d)}),0)})).emulateTransitionEnd(e.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(d)),s&&this.cycle(),this}};var r=t.fn.carousel;t.fn.carousel=n,t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=r,this};var i=function(e){var r=t(this),i=r.attr("href");i&&(i=i.replace(/.*(?=#[^\s]+$)/,""));var o=r.attr("data-target")||i,s=t(document).find(o);if(s.hasClass("carousel")){var a=t.extend({},s.data(),r.data()),l=r.attr("data-slide-to");l&&(a.interval=!1),n.call(s,a),l&&s.data("bs.carousel").to(l),e.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),t(window).on("load",(function(){t('[data-ride="carousel"]').each((function(){var e=t(this);n.call(e,e.data())}))}))}(jQuery)},63:()=>{!function(t){"use strict";var e=function(n,r){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,r),this.$trigger=t('[data-toggle="collapse"][href="#'+n.id+'"],[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function n(e){var n,r=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(document).find(r)}function r(n){return this.each((function(){var r=t(this),i=r.data("bs.collapse"),o=t.extend({},e.DEFAULTS,r.data(),"object"==typeof n&&n);!i&&o.toggle&&/show|hide/.test(n)&&(o.toggle=!1),i||r.data("bs.collapse",i=new e(this,o)),"string"==typeof n&&i[n]()}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=350,e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(n=i.data("bs.collapse"))&&n.transitioning)){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(r.call(i,"hide"),n||i.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(e.TRANSITION_DURATION)[s](this.$element[0][l])}}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var n=t.Event("hide.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var r=this.dimension();this.$element[r](this.$element[r]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return i.call(this);this.$element[r](0).one("bsTransitionEnd",t.proxy(i,this)).emulateTransitionEnd(e.TRANSITION_DURATION)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},e.prototype.getParent=function(){return t(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy((function(e,r){var i=t(r);this.addAriaAndCollapsedClass(n(i),i)}),this)).end()},e.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=t.fn.collapse;t.fn.collapse=r,t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',(function(e){var i=t(this);i.attr("data-target")||e.preventDefault();var o=n(i),s=o.data("bs.collapse")?"toggle":i.data();r.call(o,s)}))}(jQuery)},737:()=>{!function(t){"use strict";var e='[data-toggle="dropdown"]',n=function(e){t(e).on("click.bs.dropdown",this.toggle)};function r(e){var n=e.attr("data-target");n||(n=(n=e.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r="#"!==n?t(document).find(n):null;return r&&r.length?r:e.parent()}function i(n){n&&3===n.which||(t(".dropdown-backdrop").remove(),t(e).each((function(){var e=t(this),i=r(e),o={relatedTarget:this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(i[0],n.target)||(i.trigger(n=t.Event("hide.bs.dropdown",o)),n.isDefaultPrevented()||(e.attr("aria-expanded","false"),i.removeClass("open").trigger(t.Event("hidden.bs.dropdown",o)))))})))}n.VERSION="3.4.1",n.prototype.toggle=function(e){var n=t(this);if(!n.is(".disabled, :disabled")){var o=r(n),s=o.hasClass("open");if(i(),!s){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var a={relatedTarget:this};if(o.trigger(e=t.Event("show.bs.dropdown",a)),e.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(t.Event("shown.bs.dropdown",a))}return!1}},n.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=t(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var o=r(i),s=o.hasClass("open");if(!s&&27!=n.which||s&&27==n.which)return 27==n.which&&o.find(e).trigger("focus"),i.trigger("click");var a=o.find(".dropdown-menu li:not(.disabled):visible a");if(a.length){var l=a.index(n.target);38==n.which&&l>0&&l--,40==n.which&&l<a.length-1&&l++,~l||(l=0),a.eq(l).trigger("focus")}}}};var o=t.fn.dropdown;t.fn.dropdown=function(e){return this.each((function(){var r=t(this),i=r.data("bs.dropdown");i||r.data("bs.dropdown",i=new n(this)),"string"==typeof e&&i[e].call(r)}))},t.fn.dropdown.Constructor=n,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",(function(t){t.stopPropagation()})).on("click.bs.dropdown.data-api",e,n.prototype.toggle).on("keydown.bs.dropdown.data-api",e,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery)},852:()=>{!function(t){"use strict";var e=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy((function(){this.$element.trigger("loaded.bs.modal")}),this))};function n(n,r){return this.each((function(){var i=t(this),o=i.data("bs.modal"),s=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n);o||i.data("bs.modal",o=new e(this,s)),"string"==typeof n?o[n](r):s.show&&o.show(r)}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(n){var r=this,i=t.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",(function(){r.$element.one("mouseup.dismiss.bs.modal",(function(e){t(e.target).is(r.$element)&&(r.ignoreBackdropClick=!0)}))})),this.backdrop((function(){var i=t.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:n});i?r.$dialog.one("bsTransitionEnd",(function(){r.$element.trigger("focus").trigger(o)})).emulateTransitionEnd(e.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)})))},e.prototype.hide=function(n){n&&n.preventDefault(),n=t.Event("hide.bs.modal"),this.$element.trigger(n),this.isShown&&!n.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy((function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")}),this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy((function(t){27==t.which&&this.hide()}),this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},e.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop((function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")}))},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(n){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&i;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy((function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())}),this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!n)return;o?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){r.removeBackdrop(),n&&n()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):s()}else n&&n()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var n=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",e+n),t(this.fixedContent).each((function(e,r){var i=r.style.paddingRight,o=t(r).css("padding-right");t(r).data("padding-right",i).css("padding-right",parseFloat(o)+n+"px")})))},e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),t(this.fixedContent).each((function(e,n){var r=t(n).data("padding-right");t(n).removeData("padding-right"),n.style.paddingRight=r||""}))},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var r=t.fn.modal;t.fn.modal=n,t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=r,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(e){var r=t(this),i=r.attr("href"),o=r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,""),s=t(document).find(o),a=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},s.data(),r.data());r.is("a")&&e.preventDefault(),s.one("show.bs.modal",(function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",(function(){r.is(":visible")&&r.trigger("focus")}))})),n.call(s,a,this)}))}(jQuery)},927:()=>{!function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.4.1",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),(e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype)).constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();if(this.options.html){var r=typeof n;this.options.sanitize&&(e=this.sanitizeHtml(e),"string"===r&&(n=this.sanitizeHtml(n))),t.find(".popover-title").html(e),t.find(".popover-content").children().detach().end()["string"===r?"html":"append"](n)}else t.find(".popover-title").text(e),t.find(".popover-content").children().detach().end().text(n);t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=function(n){return this.each((function(){var r=t(this),i=r.data("bs.popover"),o="object"==typeof n&&n;!i&&/destroy|hide/.test(n)||(i||r.data("bs.popover",i=new e(this,o)),"string"==typeof n&&i[n]())}))},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery)},497:()=>{!function(t){"use strict";function e(n,r){this.$body=t(document.body),this.$scrollElement=t(n).is(document.body)?t(window):t(n),this.options=t.extend({},e.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each((function(){var r=t(this),i=r.data("bs.scrollspy"),o="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new e(this,o)),"string"==typeof n&&i[n]()}))}e.VERSION="3.4.1",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map((function(){var e=t(this),i=e.data("target")||e.attr("href"),o=/^#./.test(i)&&t(i);return o&&o.length&&o.is(":visible")&&[[o[n]().top+r,i]]||null})).sort((function(t,e){return t[0]-e[0]})).each((function(){e.offsets.push(this[0]),e.targets.push(this[1])}))},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,o=this.targets,s=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=r)return s!=(t=o[o.length-1])&&this.activate(t);if(s&&e<i[0])return this.activeTarget=null,this.clear();for(t=i.length;t--;)s!=o[t]&&e>=i[t]&&(void 0===i[t+1]||e<i[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',r=t(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=r,this},t(window).on("load.bs.scrollspy.data-api",(function(){t('[data-spy="scroll"]').each((function(){var e=t(this);n.call(e,e.data())}))}))}(jQuery)},814:()=>{!function(t){"use strict";var e=function(e){this.element=t(e)};function n(n){return this.each((function(){var r=t(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new e(this)),"string"==typeof n&&i[n]()}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=150,e.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),r=e.data("target");if(r||(r=(r=e.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),e.trigger(s),!s.isDefaultPrevented()&&!o.isDefaultPrevented()){var a=t(document).find(r);this.activate(e.closest("li"),n),this.activate(a,a.parent(),(function(){i.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:i[0]})}))}}},e.prototype.activate=function(n,r,i){var o=r.find("> .active"),s=i&&t.support.transition&&(o.length&&o.hasClass("fade")||!!r.find("> .fade").length);function a(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu").length&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}o.length&&s?o.one("bsTransitionEnd",a).emulateTransitionEnd(e.TRANSITION_DURATION):a(),o.removeClass("in")};var r=t.fn.tab;t.fn.tab=n,t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=r,this};var i=function(e){e.preventDefault(),n.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery)},278:()=>{!function(t){"use strict";var e=["sanitize","whiteList","sanitizeFn"],n=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],r=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,i=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function o(e,o){var s=e.nodeName.toLowerCase();if(-1!==t.inArray(s,o))return-1===t.inArray(s,n)||Boolean(e.nodeValue.match(r)||e.nodeValue.match(i));for(var a=t(o).filter((function(t,e){return e instanceof RegExp})),l=0,u=a.length;l<u;l++)if(s.match(a[l]))return!0;return!1}function s(e,n,r){if(0===e.length)return e;if(r&&"function"==typeof r)return r(e);if(!document.implementation||!document.implementation.createHTMLDocument)return e;var i=document.implementation.createHTMLDocument("sanitization");i.body.innerHTML=e;for(var s=t.map(n,(function(t,e){return e})),a=t(i.body).find("*"),l=0,u=a.length;l<u;l++){var c=a[l],h=c.nodeName.toLowerCase();if(-1!==t.inArray(h,s))for(var d=t.map(c.attributes,(function(t){return t})),f=[].concat(n["*"]||[],n[h]||[]),p=0,_=d.length;p<_;p++)o(d[p],f)||c.removeAttribute(d[p].nodeName);else c.parentNode.removeChild(c)}return i.body.innerHTML}var a=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};a.VERSION="3.4.1",a.TRANSITION_DURATION=150,a.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},a.prototype.init=function(e,n,r){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&t(document).find(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var s=i[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},a.prototype.getDefaults=function(){return a.DEFAULTS},a.prototype.getOptions=function(n){var r=this.$element.data();for(var i in r)r.hasOwnProperty(i)&&-1!==t.inArray(i,e)&&delete r[i];return(n=t.extend({},this.getDefaults(),r,n)).delay&&"number"==typeof n.delay&&(n.delay={show:n.delay,hide:n.delay}),n.sanitize&&(n.template=s(n.template,n.whiteList,n.sanitizeFn)),n},a.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,(function(t,r){n[t]!=r&&(e[t]=r)})),e},a.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState)n.hoverState="in";else{if(clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout((function(){"in"==n.hoverState&&n.show()}),n.options.delay.show)}},a.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},a.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),!n.isInStateTrue()){if(clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout((function(){"out"==n.hoverState&&n.hide()}),n.options.delay.hide)}},a.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var r=this,i=this.tip(),o=this.getUID(this.type);this.setContent(),i.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&i.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(s);u&&(s=s.replace(l,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?i.appendTo(t(document).find(this.options.container)):i.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),h=i[0].offsetWidth,d=i[0].offsetHeight;if(u){var f=s,p=this.getPosition(this.$viewport);s="bottom"==s&&c.bottom+d>p.bottom?"top":"top"==s&&c.top-d<p.top?"bottom":"right"==s&&c.right+h>p.width?"left":"left"==s&&c.left-h<p.left?"right":s,i.removeClass(f).addClass(s)}var _=this.getCalculatedOffset(s,c,h,d);this.applyPlacement(_,s);var g=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==t&&r.leave(r)};t.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",g).emulateTransitionEnd(a.TRANSITION_DURATION):g()}},a.prototype.applyPlacement=function(e,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,s=parseInt(r.css("margin-top"),10),a=parseInt(r.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top+=s,e.left+=a,t.offset.setOffset(r[0],t.extend({using:function(t){r.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),r.addClass("in");var l=r[0].offsetWidth,u=r[0].offsetHeight;"top"==n&&u!=o&&(e.top=e.top+o-u);var c=this.getViewportAdjustedDelta(n,e,l,u);c.left?e.left+=c.left:e.top+=c.top;var h=/top|bottom/.test(n),d=h?2*c.left-i+l:2*c.top-o+u,f=h?"offsetWidth":"offsetHeight";r.offset(e),this.replaceArrow(d,r[0][f],h)},a.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},a.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();this.options.html?(this.options.sanitize&&(e=s(e,this.options.whiteList,this.options.sanitizeFn)),t.find(".tooltip-inner").html(e)):t.find(".tooltip-inner").text(e),t.removeClass("fade in top bottom left right")},a.prototype.hide=function(e){var n=this,r=t(this.$tip),i=t.Event("hide.bs."+this.type);function o(){"in"!=n.hoverState&&r.detach(),n.$element&&n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),e&&e()}if(this.$element.trigger(i),!i.isDefaultPrevented())return r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",o).emulateTransitionEnd(a.TRANSITION_DURATION):o(),this.hoverState=null,this},a.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},a.prototype.hasContent=function(){return this.getTitle()},a.prototype.getPosition=function(e){var n=(e=e||this.$element)[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=t.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=window.SVGElement&&n instanceof window.SVGElement,s=r?{top:0,left:0}:o?null:e.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=r?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},i,a,l,s)},a.prototype.getCalculatedOffset=function(t,e,n,r){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-r,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-r/2,left:e.left-n}:{top:e.top+e.height/2-r/2,left:e.left+e.width}},a.prototype.getViewportAdjustedDelta=function(t,e,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-s.scroll,l=e.top+o-s.scroll+r;a<s.top?i.top=s.top-a:l>s.top+s.height&&(i.top=s.top+s.height-l)}else{var u=e.left-o,c=e.left+o+n;u<s.left?i.left=s.left-u:c>s.right&&(i.left=s.left+s.width-c)}return i},a.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},a.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},a.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},a.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},a.prototype.enable=function(){this.enabled=!0},a.prototype.disable=function(){this.enabled=!1},a.prototype.toggleEnabled=function(){this.enabled=!this.enabled},a.prototype.toggle=function(e){var n=this;e&&((n=t(e.currentTarget).data("bs."+this.type))||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},a.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide((function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null}))},a.prototype.sanitizeHtml=function(t){return s(t,this.options.whiteList,this.options.sanitizeFn)};var l=t.fn.tooltip;t.fn.tooltip=function(e){return this.each((function(){var n=t(this),r=n.data("bs.tooltip"),i="object"==typeof e&&e;!r&&/destroy|hide/.test(e)||(r||n.data("bs.tooltip",r=new a(this,i)),"string"==typeof e&&r[e]())}))},t.fn.tooltip.Constructor=a,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=l,this}}(jQuery)},294:()=>{!function(t){"use strict";t.fn.emulateTransitionEnd=function(e){var n=!1,r=this;return t(this).one("bsTransitionEnd",(function(){n=!0})),setTimeout((function(){n||t(r).trigger(t.support.transition.end)}),e),this},t((function(){t.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})}))}(jQuery)},503:(t,e,n)=>{"use strict";n.d(e,{ZF:()=>r.ZF});var r=n(238);(0,r.KN)("firebase","9.7.0","app")},956:(t,e,n)=>{"use strict";n.d(e,{N8:()=>ai,Sb:()=>li,$o:()=>ui,jM:()=>ri,iH:()=>Xr});var r=n(238),i=n(463),o=n(444),s=n(333);const a="@firebase/database",l="0.12.8";let u="";class c{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class h{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,o.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const d=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new c(e)}}catch(t){}return new h},f=d("localStorage"),p=d("sessionStorage"),_=new s.Yd("@firebase/database"),g=function(){let t=1;return function(){return t++}}(),m=function(t){const e=(0,o.dS)(t),n=new o.gQ;n.update(e);const r=n.digest();return o.US.encodeByteArray(r)},v=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=v.apply(null,r):e+="object"==typeof r?(0,o.Pz)(r):r,e+=" "}return e};let y=null,b=!0;const w=function(...t){if(!0===b&&(b=!1,null===y&&!0===p.get("logging_enabled")&&(e=!0,(0,o.hu)(!n||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(_.logLevel=s.in.VERBOSE,y=_.log.bind(_),n&&p.set("logging_enabled",!0)):"function"==typeof e?y=e:(y=null,p.remove("logging_enabled")))),y){const e=v.apply(null,t);y(e)}var e,n},C=function(t){return function(...e){w(t,...e)}},T=function(...t){const e="FIREBASE INTERNAL ERROR: "+v(...t);_.error(e)},I=function(...t){const e=`FIREBASE FATAL ERROR: ${v(...t)}`;throw _.error(e),new Error(e)},E=function(...t){const e="FIREBASE WARNING: "+v(...t);_.warn(e)},S=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},k="[MIN_NAME]",x="[MAX_NAME]",N=function(t,e){if(t===e)return 0;if(t===k||e===x)return-1;if(e===k||t===x)return 1;{const n=M(t),r=M(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},R=function(t,e){return t===e?0:t<e?-1:1},P=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.Pz)(e))},D=function(t){if("object"!=typeof t||null===t)return(0,o.Pz)(t);const e=[];for(const n in t)e.push(n);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=(0,o.Pz)(e[r]),n+=":",n+=D(t[e[r]]);return n+="}",n},A=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function O(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const $=function(t){(0,o.hu)(!S(t),"Invalid JSON number");let e,n,r,i,s;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023),n=i+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));const a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();const l=a.join("");let u="";for(s=0;s<64;s+=8){let t=parseInt(l.substr(s,8),2).toString(16);1===t.length&&(t="0"+t),u+=t}return u.toLowerCase()},L=new RegExp("^-?(0*)\\d{1,10}$"),M=function(t){if(L.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},F=function(t){try{t()}catch(t){setTimeout((()=>{const e=t.stack||"";throw E("Exception was thrown by user callback.",e),t}),Math.floor(0))}},j=function(t,e){const n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n};class q{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((t=>this.appCheck=t))}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise(((e,n)=>{setTimeout((()=>{this.appCheck?this.getToken(t).then(e,n):e(null)}),0)}))}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((e=>e.addTokenListener(t)))}notifyForInvalidToken(){E(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class U{constructor(t,e,n){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((t=>this.auth_=t))}getToken(t){return this.auth_?this.auth_.getToken(t).catch((t=>t&&"auth/token-not-initialized"===t.code?(w("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t))):new Promise(((e,n)=>{setTimeout((()=>{this.auth_?this.getToken(t).then(e,n):e(null)}),0)}))}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((e=>e.addAuthTokenListener(t)))}removeTokenChangeListener(t){this.authProvider_.get().then((e=>e.removeAuthTokenListener(t)))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',E(t)}}class z{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}z.OWNER="owner";const W=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,B="websocket",H="long_polling";class V{constructor(t,e,n,r,i=!1,o="",s=!1){this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function Y(t,e,n){let r;if((0,o.hu)("string"==typeof e,"typeof type must == string"),(0,o.hu)("object"==typeof n,"typeof params must == object"),e===B)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==H)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return O(n,((t,e)=>{i.push(t+"="+e)})),r+i.join("&")}class K{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,o.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,o.p$)(this.counters_)}}const G={},Q={};function J(t){const e=t.toString();return G[e]||(G[e]=new K),G[e]}class Z{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const t=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let e=0;e<t.length;++e)t[e]&&F((()=>{this.onMessage_(t[e])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class X{constructor(t,e,n,r,i,o,s){this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=C(t),this.stats_=J(e),this.urlFn=t=>(this.appCheckToken&&(t.ac=this.appCheckToken),Y(e,H,t))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Z(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if((0,o.Yr)()||"complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new tt(((...t)=>{const[e,n,r,i,o]=t;if(this.incrementIncomingBytes_(t),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===e)this.id=n,this.password=r;else{if("close"!==e)throw new Error("Unrecognized command received: "+e);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...t)=>{const[e,n]=t;this.incrementIncomingBytes_(t),this.myPacketOrderer.handleResponse(e,n)}),(()=>{this.onClosed_()}),this.urlFn);const t={start:"t"};t.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=this.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",this.transportSessionId&&(t.s=this.transportSessionId),this.lastSessionId&&(t.ls=this.lastSessionId),this.applicationId&&(t.p=this.applicationId),this.appCheckToken&&(t.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&W.test(location.hostname)&&(t.r="f");const e=this.urlFn(t);this.log_("Connecting via long-poll to "+e),this.scriptTagHolder.addTag(e,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){X.forceAllow_=!0}static forceDisallow(){X.forceDisallow_=!0}static isAvailable(){return!((0,o.Yr)()||!X.forceAllow_&&(X.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=(0,o.h$)(e),r=A(n,1840);for(let t=0;t<r.length;t++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[t]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,o.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,o.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class tt{constructor(t,e,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=g(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=tt.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(t){w("frame writing exception"),t.stack&&w(t.stack),w(t)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||w("No IE domain setting required")}catch(e){const n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const t=this.pendingSegs.shift();n=n+"&seg"+r+"="+t.seg+"&ts"+r+"="+t.ts+"&d"+r+"="+t.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(t,(()=>{clearTimeout(r),n()}))}addTag(t,e){(0,o.Yr)()?this.doNodeLongPoll(t,e):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){const t=n.readyState;t&&"loaded"!==t&&"complete"!==t||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{w("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(t){}}),Math.floor(1))}}let et=null;"undefined"!=typeof MozWebSocket?et=MozWebSocket:"undefined"!=typeof WebSocket&&(et=WebSocket);class nt{constructor(t,e,n,r,i,o,s){this.connId=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=C(this.connId),this.stats_=J(e),this.connURL=nt.connectionURL_(e,o,s,r),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,n,r){const i={v:"5"};return!(0,o.Yr)()&&"undefined"!=typeof location&&location.hostname&&W.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),Y(t,B,i)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if((0,o.Yr)()){const t=this.nodeAdmin?"AdminNode":"Node",e={headers:{"User-Agent":`Firebase/5/${u}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n=process.env,r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r}),this.mySock=new et(this.connURL,[],e)}else{const t={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new et(this.connURL,[],t)}}catch(t){this.log_("Error instantiating WebSocket.");const e=t.message||t.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=t=>{this.handleIncomingFrame(t)},this.mySock.onerror=t=>{this.log_("WebSocket error.  Closing connection.");const e=t.message||t.data;e&&this.log_(e),this.onClosed_()}}start(){}static forceDisallow(){nt.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(e);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==et&&!nt.forceDisallow_}static previouslyFailed(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")}markConnectionHealthy(){f.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const e=(0,o.cI)(t);this.onMessage(e)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,o.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{const t=this.extractFrameCount_(e);null!==t&&this.appendFrame_(t)}}send(t){this.resetKeepAlive();const e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=A(e,16384);n.length>1&&this.sendString_(String(n.length));for(let t=0;t<n.length;t++)this.sendString_(n[t])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}nt.responsesRequiredToBeHealthy=2,nt.healthyTimeout=3e4;class rt{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[X,nt]}initTransports_(t){const e=nt&&nt.isAvailable();let n=e&&!nt.previouslyFailed();if(t.webSocketOnly&&(e||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[nt];else{const t=this.transports_=[];for(const e of rt.ALL_TRANSPORTS)e&&e.isAvailable()&&t.push(e)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class it{constructor(t,e,n,r,i,o,s,a,l,u){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=C("c:"+this.id+":"),this.transportManager_=new rt(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(e,n)}),Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=j((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=P("t",t),n=P("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=P("t",t),n=P("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=P("t",t);if("d"in t){const n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let t=0;t<this.pendingDataMessages.length;++t)this.onDataMessage_(this.pendingDataMessages[t]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?T("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):T("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),j((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):j((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ot{put(t,e,n,r){}merge(t,e,n,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,n){}onDisconnectMerge(t,e,n){}onDisconnectCancel(t,e){}reportStats(t){}}class st{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,o.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const n=[...this.listeners_[t]];for(let t=0;t<n.length;t++)n[t].callback.apply(n[t].context,e)}}on(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});const r=this.getInitialEvent(t);r&&e.apply(n,r)}off(t,e,n){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let t=0;t<r.length;t++)if(r[t].callback===e&&(!n||n===r[t].context))return void r.splice(t,1)}validateEventType_(t){(0,o.hu)(this.allowedEvents_.find((e=>e===t)),"Unknown event: "+t)}}class at extends st{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.uI)()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new at}getInitialEvent(t){return(0,o.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class lt{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let e=0;for(let t=0;t<this.pieces_.length;t++)this.pieces_[t].length>0&&(this.pieces_[e]=this.pieces_[t],e++);this.pieces_.length=e,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function ut(){return new lt("")}function ct(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ht(t){return t.pieces_.length-t.pieceNum_}function dt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new lt(t.pieces_,e)}function ft(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function pt(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function _t(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new lt(e,0)}function gt(t,e){const n=[];for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);if(e instanceof lt)for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);else{const t=e.split("/");for(let e=0;e<t.length;e++)t[e].length>0&&n.push(t[e])}return new lt(n,0)}function mt(t){return t.pieceNum_>=t.pieces_.length}function vt(t,e){const n=ct(t),r=ct(e);if(null===n)return e;if(n===r)return vt(dt(t),dt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function yt(t,e){if(ht(t)!==ht(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function bt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ht(t)>ht(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class wt{constructor(t,e){this.errorPrefix_=e,this.parts_=pt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let t=0;t<this.parts_.length;t++)this.byteLength_+=(0,o.ug)(this.parts_[t]);Ct(this)}}function Ct(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Tt(t))}function Tt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class It extends st{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,(()=>{const e=!document[t];e!==this.visible_&&(this.visible_=e,this.trigger("visible",e))}),!1)}static getInstance(){return new It}getInitialEvent(t){return(0,o.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const Et=1e3;class St extends ot{constructor(t,e,n,r,i,s,a,l){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=St.nextPersistentConnectionId_++,this.log_=C("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Et,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,o.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");It.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&at.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,n){const r=++this.requestNumber_,i={r,a:t,b:e};this.log_((0,o.Pz)(i)),(0,o.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(t){this.initConnection_();const e=new o.BH,n={p:t._path.toString(),q:t._queryObject},r={action:"g",request:n,onComplete:t=>{const r=t.d;"ok"===t.s?(this.onDataUpdate_(n.p,r,!1,null),e.resolve(r)):e.reject(r)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_||setTimeout((()=>{const t=this.outstandingGets_[i];void 0!==t&&r===t&&(delete this.outstandingGets_[i],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+i+" timed out on connection"),e.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(i),e.promise}listen(t,e,n,r){this.initConnection_();const i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.hu)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,(n=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(n)}))}sendListen_(t){const e=t.query,n=e._path.toString(),r=e._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};t.tag&&(i.q=e._queryObject,i.t=t.tag),i.h=t.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,s=i.s;St.warnOnListenWarnings_(o,e),(this.listens.get(n)&&this.listens.get(n).get(r))===t&&(this.log_("listen response",i),"ok"!==s&&this.removeListen_(n,r),t.onComplete&&t.onComplete(s,o))}))}static warnOnListenWarnings_(t,e){if(t&&"object"==typeof t&&(0,o.r3)(t,"w")){const n=(0,o.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',n=e._path.toString();E(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${t} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,o.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=(0,o.w9)(t)?"auth":"gauth",n={cred:t};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,(e=>{const n=e.s,r=e.d||"error";this.authToken_===t&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(t=>{const e=t.s,n=t.d||"error";"ok"===e?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,n)}))}unlisten(t,e){const n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)}sendUnlisten_(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);const i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})}onDisconnectMerge(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,n,r){const i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(t=>{r&&setTimeout((()=>{r(t.s,t.d)}),Math.floor(0))}))}put(t,e,n,r){this.putInternal("p",t,e,n,r)}merge(t,e,n,r){this.putInternal("m",t,e,n,r)}putInternal(t,e,n,r,i){this.initConnection_();const o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,n=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,n,(n=>{this.log_(e+" response",n),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,(t=>{if("ok"!==t.s){const e=t.d;this.log_("reportStats","Error sending stats: "+e)}}))}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,o.Pz)(t));const e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):T("Unrecognized action received from server: "+(0,o.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,o.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Et,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Et,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Et),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+St.nextConnectionId_++,i=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,n())},u=function(t){(0,o.hu)(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(t)};this.realtime_={close:l,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?w("getToken() completed but was canceled"):(w("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new it(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,n,(t=>{E(t+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(t){this.log_("Failed to get token: "+t),s||(this.repoInfo_.nodeAdmin&&E(t),l())}}}interrupt(t){w("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){w("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Et,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let n;n=e?e.map((t=>D(t))).join("$"):"default";const r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,e){const n=new lt(t).toString();let r;if(this.listens.has(n)){const t=this.listens.get(n);r=t.get(e),t.delete(e),0===t.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(t,e){w("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){w("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";(0,o.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+u.replace(/\./g,"-")]=1,(0,o.uI)()?t["framework.cordova"]=1:(0,o.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=at.getInstance().currentlyOnline();return(0,o.xb)(this.interruptReasons_)&&t}}St.nextPersistentConnectionId_=0,St.nextConnectionId_=0;class kt{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new kt(t,e)}}class xt{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const n=new kt(k,t),r=new kt(k,e);return 0!==this.compare(n,r)}minPost(){return kt.MIN}}let Nt;class Rt extends xt{static get __EMPTY_NODE(){return Nt}static set __EMPTY_NODE(t){Nt=t}compare(t,e){return N(t.name,e.name)}isDefinedOn(t){throw(0,o.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return kt.MIN}maxPost(){return new kt(x,Nt)}makePost(t,e){return(0,o.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new kt(t,Nt)}toString(){return".key"}}const Pt=new Rt;class Dt{constructor(t,e,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class At{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:At.RED,this.left=null!=r?r:Ot.EMPTY_NODE,this.right=null!=i?i:Ot.EMPTY_NODE}copy(t,e,n,r,i){return new At(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ot.EMPTY_NODE;let t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let n,r;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ot.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}At.RED=!0,At.BLACK=!1;class Ot{constructor(t,e=Ot.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ot(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,At.BLACK,null,null))}remove(t){return new Ot(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,At.BLACK,null,null))}get(t){let e,n=this.root_;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(t){let e,n=this.root_,r=null;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Dt(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Dt(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Dt(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Dt(this.root_,null,this.comparator_,!0,t)}}function $t(t,e){return N(t.name,e.name)}function Lt(t,e){return N(t,e)}let Mt;Ot.EMPTY_NODE=new class{copy(t,e,n,r,i){return this}insert(t,e,n){return new At(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ft=function(t){return"number"==typeof t?"number:"+$(t):"string:"+t},jt=function(t){if(t.isLeafNode()){const e=t.val();(0,o.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.r3)(e,".sv"),"Priority must be a string or number.")}else(0,o.hu)(t===Mt||t.isEmpty(),"priority of unexpected type.");(0,o.hu)(t===Mt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qt,Ut,zt;class Wt{constructor(t,e=Wt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,(0,o.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),jt(this.priorityNode_)}static set __childrenNodeConstructor(t){qt=t}static get __childrenNodeConstructor(){return qt}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Wt(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:Wt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return mt(t)?this:".priority"===ct(t)?this.priorityNode_:Wt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Wt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const n=ct(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:((0,o.hu)(".priority"!==n||1===ht(t),".priority must be the last token in a path"),this.updateImmediateChild(n,Wt.__childrenNodeConstructor.EMPTY_NODE.updateChild(dt(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ft(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",t+="number"===e?$(this.value_):this.value_,this.lazyHash_=m(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Wt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Wt.__childrenNodeConstructor?-1:((0,o.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,n=typeof this.value_,r=Wt.VALUE_TYPE_ORDER.indexOf(e),i=Wt.VALUE_TYPE_ORDER.indexOf(n);return(0,o.hu)(r>=0,"Unknown leaf type: "+e),(0,o.hu)(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1}}Wt.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Bt=new class extends xt{compare(t,e){const n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?N(t.name,e.name):i}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return kt.MIN}maxPost(){return new kt(x,new Wt("[PRIORITY-POST]",zt))}makePost(t,e){const n=Ut(t);return new kt(e,new Wt("[PRIORITY-POST]",n))}toString(){return".priority"}},Ht=Math.log(2);class Vt{constructor(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Ht,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=t+1&n}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Yt=function(t,e,n,r){t.sort(e);const i=function(e,r){const o=r-e;let s,a;if(0===o)return null;if(1===o)return s=t[e],a=n?n(s):s,new At(a,s.node,At.BLACK,null,null);{const l=parseInt(o/2,10)+e,u=i(e,l),c=i(l+1,r);return s=t[l],a=n?n(s):s,new At(a,s.node,At.BLACK,u,c)}},o=function(e){let r=null,o=null,s=t.length;const a=function(e,r){const o=s-e,a=s;s-=e;const u=i(o+1,a),c=t[o],h=n?n(c):c;l(new At(h,c.node,r,null,u))},l=function(t){r?(r.left=t,r=t):(o=t,r=t)};for(let t=0;t<e.count;++t){const n=e.nextBitIsOne(),r=Math.pow(2,e.count-(t+1));n?a(r,At.BLACK):(a(r,At.BLACK),a(r,At.RED))}return o}(new Vt(t.length));return new Ot(r||e,o)};let Kt;const Gt={};class Qt{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,o.hu)(Gt&&Bt,"ChildrenNode.ts has not been loaded"),Kt=Kt||new Qt({".priority":Gt},{".priority":Bt}),Kt}get(t){const e=(0,o.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ot?e:null}hasIndex(t){return(0,o.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,o.hu)(t!==Pt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=e.getIterator(kt.Wrap);let s,a=i.getNext();for(;a;)r=r||t.isDefinedOn(a.node),n.push(a),a=i.getNext();s=r?Yt(n,t.getCompare()):Gt;const l=t.toString(),u=Object.assign({},this.indexSet_);u[l]=t;const c=Object.assign({},this.indexes_);return c[l]=s,new Qt(c,u)}addToIndexes(t,e){const n=(0,o.UI)(this.indexes_,((n,r)=>{const i=(0,o.DV)(this.indexSet_,r);if((0,o.hu)(i,"Missing index implementation for "+r),n===Gt){if(i.isDefinedOn(t.node)){const n=[],r=e.getIterator(kt.Wrap);let o=r.getNext();for(;o;)o.name!==t.name&&n.push(o),o=r.getNext();return n.push(t),Yt(n,i.getCompare())}return Gt}{const r=e.get(t.name);let i=n;return r&&(i=i.remove(new kt(t.name,r))),i.insert(t,t.node)}}));return new Qt(n,this.indexSet_)}removeFromIndexes(t,e){const n=(0,o.UI)(this.indexes_,(n=>{if(n===Gt)return n;{const r=e.get(t.name);return r?n.remove(new kt(t.name,r)):n}}));return new Qt(n,this.indexSet_)}}let Jt;class Zt{constructor(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&jt(this.priorityNode_),this.children_.isEmpty()&&(0,o.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Jt||(Jt=new Zt(new Ot(Lt),null,Qt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Jt}updatePriority(t){return this.children_.isEmpty()?this:new Zt(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const e=this.children_.get(t);return null===e?Jt:e}}getChild(t){const e=ct(t);return null===e?this:this.getImmediateChild(e).getChild(dt(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,e){if((0,o.hu)(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);{const n=new kt(t,e);let r,i;e.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),i=this.indexMap_.addToIndexes(n,this.children_));const o=r.isEmpty()?Jt:this.priorityNode_;return new Zt(r,o,i)}}updateChild(t,e){const n=ct(t);if(null===n)return e;{(0,o.hu)(".priority"!==ct(t)||1===ht(t),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(dt(t),e);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let n=0,r=0,i=!0;if(this.forEachChild(Bt,((o,s)=>{e[o]=s.val(t),n++,i&&Zt.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!t&&i&&r<2*n){const t=[];for(const n in e)t[n]=e[n];return t}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Ft(this.getPriority().val())+":"),this.forEachChild(Bt,((e,n)=>{const r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":m(t)}return this.lazyHash_}getPredecessorChildName(t,e,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new kt(t,e));return n?n.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.minKey();return t&&t.name}return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new kt(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.maxKey();return t&&t.name}return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new kt(e,this.children_.get(e)):null}forEachChild(t,e){const n=this.resolveIndex_(t);return n?n.inorderTraversal((t=>e(t.name,t.node))):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(t=>t));{const n=this.children_.getIteratorFrom(t.name,kt.Wrap);let r=n.peek();for(;null!=r&&e.compare(r,t)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(t=>t));{const n=this.children_.getReverseIteratorFrom(t.name,kt.Wrap);let r=n.peek();for(;null!=r&&e.compare(r,t)>0;)n.getNext(),r=n.peek();return n}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Xt?-1:0}withIndex(t){if(t===Pt||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new Zt(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===Pt||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){const t=this.getIterator(Bt),n=e.getIterator(Bt);let r=t.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=t.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(t){return t===Pt?null:this.indexMap_.get(t.toString())}}Zt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Xt=new class extends Zt{constructor(){super(new Ot(Lt),Zt.EMPTY_NODE,Qt.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Zt.EMPTY_NODE}isEmpty(){return!1}};function te(t,e=null){if(null===t)return Zt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Wt(t,te(e));if(t instanceof Array){let n=Zt.EMPTY_NODE;return O(t,((e,r)=>{if((0,o.r3)(t,e)&&"."!==e.substring(0,1)){const t=te(r);!t.isLeafNode()&&t.isEmpty()||(n=n.updateImmediateChild(e,t))}})),n.updatePriority(te(e))}{const n=[];let r=!1;if(O(t,((t,e)=>{if("."!==t.substring(0,1)){const i=te(e);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new kt(t,i)))}})),0===n.length)return Zt.EMPTY_NODE;const i=Yt(n,$t,(t=>t.name),Lt);if(r){const t=Yt(n,Bt.getCompare());return new Zt(i,te(e),new Qt({".priority":t},{".priority":Bt}))}return new Zt(i,te(e),Qt.Default)}}Object.defineProperties(kt,{MIN:{value:new kt(k,Zt.EMPTY_NODE)},MAX:{value:new kt(x,Xt)}}),Rt.__EMPTY_NODE=Zt.EMPTY_NODE,Wt.__childrenNodeConstructor=Zt,Mt=Xt,zt=Xt,function(t){Ut=t}(te);class ee extends xt{constructor(t){super(),this.indexPath_=t,(0,o.hu)(!mt(t)&&".priority"!==ct(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?N(t.name,e.name):i}makePost(t,e){const n=te(t),r=Zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new kt(e,r)}maxPost(){const t=Zt.EMPTY_NODE.updateChild(this.indexPath_,Xt);return new kt(x,t)}toString(){return pt(this.indexPath_,0).join("/")}}const ne=new class extends xt{compare(t,e){const n=t.node.compareTo(e.node);return 0===n?N(t.name,e.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return kt.MIN}maxPost(){return kt.MAX}makePost(t,e){const n=te(t);return new kt(e,n)}toString(){return".value"}};function re(t){return{type:"value",snapshotNode:t}}function ie(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function oe(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function se(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class ae{constructor(t){this.index_=t}updateChild(t,e,n,r,i,s){(0,o.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(oe(e,a)):(0,o.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ie(e,n)):s.trackChildChange(se(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))}updateFullNode(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Bt,((t,r)=>{e.hasChild(t)||n.trackChildChange(oe(t,r))})),e.isLeafNode()||e.forEachChild(Bt,((e,r)=>{if(t.hasChild(e)){const i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(se(e,r,i))}else n.trackChildChange(ie(e,r))}))),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Zt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class le{constructor(t){this.indexedFilter_=new ae(t.getIndex()),this.index_=t.getIndex(),this.startPost_=le.getStartPost_(t),this.endPost_=le.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,n,r,i,o){return this.matches(new kt(e,n))||(n=Zt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)}updateFullNode(t,e,n){e.isLeafNode()&&(e=Zt.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(Zt.EMPTY_NODE);const i=this;return e.forEachChild(Bt,((t,e)=>{i.matches(new kt(t,e))||(r=r.updateImmediateChild(t,Zt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class ue{constructor(t){this.rangedFilter_=new le(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,n,r,i,o){return this.rangedFilter_.matches(new kt(e,n))||(n=Zt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)}updateFullNode(t,e,n){let r;if(e.isLeafNode()||e.isEmpty())r=Zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let t;r=Zt.EMPTY_NODE.withIndex(this.index_),t=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;t.hasNext()&&n<this.limit_;){const e=t.getNext();let i;if(i=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),e)<=0:this.index_.compare(e,this.rangedFilter_.getEndPost())<=0,!i)break;r=r.updateImmediateChild(e.name,e.node),n++}}else{let t,n,i,o;if(r=e.withIndex(this.index_),r=r.updatePriority(Zt.EMPTY_NODE),this.reverse_){o=r.getReverseIterator(this.index_),t=this.rangedFilter_.getEndPost(),n=this.rangedFilter_.getStartPost();const e=this.index_.getCompare();i=(t,n)=>e(n,t)}else o=r.getIterator(this.index_),t=this.rangedFilter_.getStartPost(),n=this.rangedFilter_.getEndPost(),i=this.index_.getCompare();let s=0,a=!1;for(;o.hasNext();){const e=o.getNext();!a&&i(t,e)<=0&&(a=!0),a&&s<this.limit_&&i(e,n)<=0?s++:r=r.updateImmediateChild(e.name,Zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,n,r,i){let s;if(this.reverse_){const t=this.index_.getCompare();s=(e,n)=>t(n,e)}else s=this.index_.getCompare();const a=t;(0,o.hu)(a.numChildren()===this.limit_,"");const l=new kt(e,n),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(l);if(a.hasChild(e)){const t=a.getImmediateChild(e);let o=r.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=o&&(o.name===e||a.hasChild(o.name));)o=r.getChildAfterChild(this.index_,o,this.reverse_);const h=null==o?1:s(o,l);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(se(e,n,t)),a.updateImmediateChild(e,n);{null!=i&&i.trackChildChange(oe(e,t));const n=a.updateImmediateChild(e,Zt.EMPTY_NODE);return null!=o&&this.rangedFilter_.matches(o)?(null!=i&&i.trackChildChange(ie(o.name,o.node)),n.updateImmediateChild(o.name,o.node)):n}}return n.isEmpty()?t:c&&s(u,l)>=0?(null!=i&&(i.trackChildChange(oe(u.name,u.node)),i.trackChildChange(ie(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(u.name,Zt.EMPTY_NODE)):t}}class ce{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Bt}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:k}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,o.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Bt}copy(){const t=new ce;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function he(t){const e={};if(t.isDefault())return e;let n;return t.index_===Bt?n="$priority":t.index_===ne?n="$value":t.index_===Pt?n="$key":((0,o.hu)(t.index_ instanceof ee,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=(0,o.Pz)(n),t.startSet_&&(e.startAt=(0,o.Pz)(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+(0,o.Pz)(t.indexStartName_))),t.endSet_&&(e.endAt=(0,o.Pz)(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+(0,o.Pz)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function de(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Bt&&(e.i=t.index_.toString()),e}class fe extends ot{constructor(t,e,n,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=C("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,o.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,n,r){const i=t._path.toString();this.log_("Listen called for "+i+" "+t._queryIdentifier);const s=fe.getListenId_(t,n),a={};this.listens_[s]=a;const l=he(t._queryParams);this.restRequest_(i+".json",l,((t,e)=>{let l=e;if(404===t&&(l=null,t=null),null===t&&this.onDataUpdate_(i,l,!1,n),(0,o.DV)(this.listens_,s)===a){let e;e=t?401===t?"permission_denied":"rest_error:"+t:"ok",r(e,null)}}))}unlisten(t,e){const n=fe.getListenId_(t,e);delete this.listens_[n]}get(t){const e=he(t._queryParams),n=t._path.toString(),r=new o.BH;return this.restRequest_(n+".json",e,((t,e)=>{let i=e;404===t&&(i=null,t=null),null===t?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(t){}restRequest_(t,e={},n){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([r,i])=>{r&&r.accessToken&&(e.auth=r.accessToken),i&&i.token&&(e.ac=i.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,o.xO)(e);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let t=null;if(a.status>=200&&a.status<300){try{t=(0,o.cI)(a.responseText)}catch(t){E("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&E("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))}}class pe{constructor(){this.rootNode_=Zt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function _e(){return{value:null,children:new Map}}function ge(t,e,n){if(mt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=ct(e);t.children.has(r)||t.children.set(r,_e()),ge(t.children.get(r),e=dt(e),n)}}function me(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(((t,n)=>{e(n,t)}))}(t,((t,r)=>{me(r,new lt(e.toString()+"/"+t),n)}))}class ve{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&O(this.last_,((t,n)=>{e[t]=e[t]-n})),this.last_=t,e}}class ye{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new ve(t);const n=1e4+2e4*Math.random();j(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const t=this.statsListener_.get(),e={};let n=!1;O(t,((t,r)=>{r>0&&(0,o.r3)(this.statsToReport_,t)&&(e[t]=r,n=!0)})),n&&this.server_.reportStats(e),j(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var be;function we(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(be||(be={}));class Ce{constructor(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=be.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(mt(this.path)){if(null!=this.affectedTree.value)return(0,o.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new lt(t));return new Ce(ut(),e,this.revert)}}return(0,o.hu)(ct(this.path)===t,"operationForChild called for unrelated child."),new Ce(dt(this.path),this.affectedTree,this.revert)}}class Te{constructor(t,e){this.source=t,this.path=e,this.type=be.LISTEN_COMPLETE}operationForChild(t){return mt(this.path)?new Te(this.source,ut()):new Te(this.source,dt(this.path))}}class Ie{constructor(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=be.OVERWRITE}operationForChild(t){return mt(this.path)?new Ie(this.source,ut(),this.snap.getImmediateChild(t)):new Ie(this.source,dt(this.path),this.snap)}}class Ee{constructor(t,e,n){this.source=t,this.path=e,this.children=n,this.type=be.MERGE}operationForChild(t){if(mt(this.path)){const e=this.children.subtree(new lt(t));return e.isEmpty()?null:e.value?new Ie(this.source,ut(),e.value):new Ee(this.source,ut(),e)}return(0,o.hu)(ct(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Ee(this.source,dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Se{constructor(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(mt(t))return this.isFullyInitialized()&&!this.filtered_;const e=ct(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class ke{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function xe(t,e,n,r,i,s){const a=r.filter((t=>t.type===n));a.sort(((e,n)=>function(t,e,n){if(null==e.childName||null==n.childName)throw(0,o.g5)("Should only compare child_ events.");const r=new kt(e.childName,e.snapshotNode),i=new kt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n))),a.forEach((n=>{const r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach((i=>{i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function Ne(t,e){return{eventCache:t,serverCache:e}}function Re(t,e,n,r){return Ne(new Se(e,n,r),t.serverCache)}function Pe(t,e,n,r){return Ne(t.eventCache,new Se(e,n,r))}function De(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ae(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let Oe;class $e{constructor(t,e=(()=>(Oe||(Oe=new Ot(R)),Oe))()){this.value=t,this.children=e}static fromObject(t){let e=new $e(null);return O(t,((t,n)=>{e=e.set(new lt(t),n)})),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:ut(),value:this.value};if(mt(t))return null;{const n=ct(t),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(dt(t),e);return null!=i?{path:gt(new lt(n),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,(()=>!0))}subtree(t){if(mt(t))return this;{const e=ct(t),n=this.children.get(e);return null!==n?n.subtree(dt(t)):new $e(null)}}set(t,e){if(mt(t))return new $e(e,this.children);{const n=ct(t),r=(this.children.get(n)||new $e(null)).set(dt(t),e),i=this.children.insert(n,r);return new $e(this.value,i)}}remove(t){if(mt(t))return this.children.isEmpty()?new $e(null):new $e(null,this.children);{const e=ct(t),n=this.children.get(e);if(n){const r=n.remove(dt(t));let i;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?new $e(null):new $e(this.value,i)}return this}}get(t){if(mt(t))return this.value;{const e=ct(t),n=this.children.get(e);return n?n.get(dt(t)):null}}setTree(t,e){if(mt(t))return e;{const n=ct(t),r=(this.children.get(n)||new $e(null)).setTree(dt(t),e);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new $e(this.value,i)}}fold(t){return this.fold_(ut(),t)}fold_(t,e){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(gt(t,r),e)})),e(t,this.value,n)}findOnPath(t,e){return this.findOnPath_(t,ut(),e)}findOnPath_(t,e,n){const r=!!this.value&&n(e,this.value);if(r)return r;if(mt(t))return null;{const r=ct(t),i=this.children.get(r);return i?i.findOnPath_(dt(t),gt(e,r),n):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,ut(),e)}foreachOnPath_(t,e,n){if(mt(t))return this;{this.value&&n(e,this.value);const r=ct(t),i=this.children.get(r);return i?i.foreachOnPath_(dt(t),gt(e,r),n):new $e(null)}}foreach(t){this.foreach_(ut(),t)}foreach_(t,e){this.children.inorderTraversal(((n,r)=>{r.foreach_(gt(t,n),e)})),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal(((e,n)=>{n.value&&t(e,n.value)}))}}class Le{constructor(t){this.writeTree_=t}static empty(){return new Le(new $e(null))}}function Me(t,e,n){if(mt(e))return new Le(new $e(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const s=vt(i,e);return o=o.updateChild(s,n),new Le(t.writeTree_.set(i,o))}{const r=new $e(n),i=t.writeTree_.setTree(e,r);return new Le(i)}}}function Fe(t,e,n){let r=t;return O(n,((t,n)=>{r=Me(r,gt(e,t),n)})),r}function je(t,e){if(mt(e))return Le.empty();{const n=t.writeTree_.setTree(e,new $e(null));return new Le(n)}}function qe(t,e){return null!=Ue(t,e)}function Ue(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(vt(n.path,e)):null}function ze(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Bt,((t,n)=>{e.push(new kt(t,n))})):t.writeTree_.children.inorderTraversal(((t,n)=>{null!=n.value&&e.push(new kt(t,n.value))})),e}function We(t,e){if(mt(e))return t;{const n=Ue(t,e);return new Le(null!=n?new $e(n):t.writeTree_.subtree(e))}}function Be(t){return t.writeTree_.isEmpty()}function He(t,e){return Ve(ut(),t.writeTree_,e)}function Ve(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal(((e,i)=>{".priority"===e?((0,o.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Ve(gt(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(gt(t,".priority"),r)),n}}function Ye(t,e){return on(e,t)}function Ke(t,e){if(t.snap)return bt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&bt(gt(t.path,n),e))return!0;return!1}function Ge(t){return t.visible}function Qe(t,e,n){let r=Le.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const t=s.path;let e;if(s.snap)bt(n,t)?(e=vt(n,t),r=Me(r,e,s.snap)):bt(t,n)&&(e=vt(t,n),r=Me(r,ut(),s.snap.getChild(e)));else{if(!s.children)throw(0,o.g5)("WriteRecord should have .snap or .children");if(bt(n,t))e=vt(n,t),r=Fe(r,e,s.children);else if(bt(t,n))if(e=vt(t,n),mt(e))r=Fe(r,ut(),s.children);else{const t=(0,o.DV)(s.children,ct(e));if(t){const n=t.getChild(dt(e));r=Me(r,ut(),n)}}}}}return r}function Je(t,e,n,r,i){if(r||i){const o=We(t.visibleWrites,e);if(!i&&Be(o))return n;if(i||null!=n||qe(o,ut())){const o=function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(bt(t.path,e)||bt(e,t.path))};return He(Qe(t.allWrites,o,e),n||Zt.EMPTY_NODE)}return null}{const r=Ue(t.visibleWrites,e);if(null!=r)return r;{const r=We(t.visibleWrites,e);return Be(r)?n:null!=n||qe(r,ut())?He(r,n||Zt.EMPTY_NODE):null}}}function Ze(t,e,n,r){return Je(t.writeTree,t.treePath,e,n,r)}function Xe(t,e){return function(t,e,n){let r=Zt.EMPTY_NODE;const i=Ue(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Bt,((t,e)=>{r=r.updateImmediateChild(t,e)})),r;if(n){const i=We(t.visibleWrites,e);return n.forEachChild(Bt,((t,e)=>{const n=He(We(i,new lt(t)),e);r=r.updateImmediateChild(t,n)})),ze(i).forEach((t=>{r=r.updateImmediateChild(t.name,t.node)})),r}return ze(We(t.visibleWrites,e)).forEach((t=>{r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function tn(t,e,n,r){return function(t,e,n,r,i){(0,o.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=gt(e,n);if(qe(t.visibleWrites,s))return null;{const e=We(t.visibleWrites,s);return Be(e)?i.getChild(n):He(e,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function en(t,e){return function(t,e){return Ue(t.visibleWrites,e)}(t.writeTree,gt(t.treePath,e))}function nn(t,e,n){return function(t,e,n,r){const i=gt(e,n),o=Ue(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?He(We(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function rn(t,e){return on(gt(t.treePath,e),t.writeTree)}function on(t,e){return{treePath:t,writeTree:e}}class sn{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,n=t.childName;(0,o.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,o.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,se(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,oe(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ie(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,o.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,se(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}}const an=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,n){return null}};class ln{constructor(t,e,n=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const e=null!=this.optCompleteServerCache_?new Se(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nn(this.writes_,t,e)}}getChildAfterChild(t,e,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ae(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){let a;const l=We(t.visibleWrites,e),u=Ue(l,ut());if(null!=u)a=u;else{if(null==n)return[];a=He(l,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const t=[],e=s.getCompare(),n=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let l=n.getNext();for(;l&&t.length<i;)0!==e(l,r)&&t.push(l),l=n.getNext();return t}}(t.writeTree,t.treePath,e,n,r,i,o)}(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]}}function un(t,e,n,r,i,s){const a=e.eventCache;if(null!=en(r,n))return e;{let l,u;if(mt(n))if((0,o.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const n=Ae(e),i=Xe(r,n instanceof Zt?n:Zt.EMPTY_NODE);l=t.filter.updateFullNode(e.eventCache.getNode(),i,s)}else{const n=Ze(r,Ae(e));l=t.filter.updateFullNode(e.eventCache.getNode(),n,s)}else{const c=ct(n);if(".priority"===c){(0,o.hu)(1===ht(n),"Can't have a priority with additional path components");const i=a.getNode();u=e.serverCache.getNode();const s=tn(r,n,i,u);l=null!=s?t.filter.updatePriority(i,s):a.getNode()}else{const o=dt(n);let h;if(a.isCompleteForChild(c)){u=e.serverCache.getNode();const t=tn(r,n,a.getNode(),u);h=null!=t?a.getNode().getImmediateChild(c).updateChild(o,t):a.getNode().getImmediateChild(c)}else h=nn(r,c,e.serverCache);l=null!=h?t.filter.updateChild(a.getNode(),c,h,o,i,s):a.getNode()}}return Re(e,l,a.isFullyInitialized()||mt(n),t.filter.filtersNodes())}}function cn(t,e,n,r,i,o,s,a){const l=e.serverCache;let u;const c=s?t.filter:t.filter.getIndexedFilter();if(mt(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const t=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),t,null)}else{const t=ct(n);if(!l.isCompleteForPath(n)&&ht(n)>1)return e;const i=dt(n),o=l.getNode().getImmediateChild(t).updateChild(i,r);u=".priority"===t?c.updatePriority(l.getNode(),o):c.updateChild(l.getNode(),t,o,i,an,null)}const h=Pe(e,u,l.isFullyInitialized()||mt(n),c.filtersNodes());return un(t,h,n,i,new ln(i,h,o),a)}function hn(t,e,n,r,i,o,s){const a=e.eventCache;let l,u;const c=new ln(i,e,o);if(mt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),l=Re(e,u,!0,t.filter.filtersNodes());else{const i=ct(n);if(".priority"===i)u=t.filter.updatePriority(e.eventCache.getNode(),r),l=Re(e,u,a.isFullyInitialized(),a.isFiltered());else{const o=dt(n),u=a.getNode().getImmediateChild(i);let h;if(mt(o))h=r;else{const t=c.getCompleteChild(i);h=null!=t?".priority"===ft(o)&&t.getChild(_t(o)).isEmpty()?t:t.updateChild(o,r):Zt.EMPTY_NODE}l=u.equals(h)?e:Re(e,t.filter.updateChild(a.getNode(),i,h,o,c,s),a.isFullyInitialized(),t.filter.filtersNodes())}}return l}function dn(t,e){return t.eventCache.isCompleteForChild(e)}function fn(t,e,n){return n.foreach(((t,n)=>{e=e.updateChild(t,n)})),e}function pn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l,u=e;l=mt(n)?r:new $e(null).setTree(n,r);const c=e.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(c.hasChild(n)){const l=fn(0,e.serverCache.getNode().getImmediateChild(n),r);u=cn(t,u,new lt(n),l,i,o,s,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!c.hasChild(n)&&!l){const l=fn(0,e.serverCache.getNode().getImmediateChild(n),r);u=cn(t,u,new lt(n),l,i,o,s,a)}})),u}class _n{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new ae(n.getIndex()),i=(o=n).loadsAllData()?new ae(o.getIndex()):o.hasLimit()?new ue(o):new le(o);var o;this.processor_=function(t){return{filter:t}}(i);const s=e.serverCache,a=e.eventCache,l=r.updateFullNode(Zt.EMPTY_NODE,s.getNode(),null),u=i.updateFullNode(Zt.EMPTY_NODE,a.getNode(),null),c=new Se(l,s.isFullyInitialized(),r.filtersNodes()),h=new Se(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Ne(h,c),this.eventGenerator_=new ke(this.query_)}get query(){return this.query_}}function gn(t,e){const n=Ae(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!mt(e)&&!n.getImmediateChild(ct(e)).isEmpty())?n.getChild(e):null}function mn(t){return 0===t.eventRegistrations_.length}function vn(t,e,n){const r=[];if(n){(0,o.hu)(null==e,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach((t=>{const e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){let n=[];for(let r=0;r<t.eventRegistrations_.length;++r){const i=t.eventRegistrations_[r];if(i.matches(e)){if(e.hasAnyCallback()){n=n.concat(t.eventRegistrations_.slice(r+1));break}}else n.push(i)}t.eventRegistrations_=n}else t.eventRegistrations_=[];return r}function yn(t,e,n,r){e.type===be.MERGE&&null!==e.source.queryId&&((0,o.hu)(Ae(t.viewCache_),"We should always have a full cache before handling merges"),(0,o.hu)(De(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=function(t,e,n,r,i){const s=new sn;let a,l;if(n.type===be.OVERWRITE){const u=n;u.source.fromUser?a=hn(t,e,u.path,u.snap,r,i,s):((0,o.hu)(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!mt(u.path),a=cn(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===be.MERGE){const u=n;u.source.fromUser?a=function(t,e,n,r,i,o,s){let a=e;return r.foreach(((r,l)=>{const u=gt(n,r);dn(e,ct(u))&&(a=hn(t,a,u,l,i,o,s))})),r.foreach(((r,l)=>{const u=gt(n,r);dn(e,ct(u))||(a=hn(t,a,u,l,i,o,s))})),a}(t,e,u.path,u.children,r,i,s):((0,o.hu)(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),a=pn(t,e,u.path,u.children,r,i,l,s))}else if(n.type===be.ACK_USER_WRITE){const l=n;a=l.revert?function(t,e,n,r,i,s){let a;if(null!=en(r,n))return e;{const l=new ln(r,e,i),u=e.eventCache.getNode();let c;if(mt(n)||".priority"===ct(n)){let n;if(e.serverCache.isFullyInitialized())n=Ze(r,Ae(e));else{const t=e.serverCache.getNode();(0,o.hu)(t instanceof Zt,"serverChildren would be complete if leaf node"),n=Xe(r,t)}c=t.filter.updateFullNode(u,n,s)}else{const i=ct(n);let o=nn(r,i,e.serverCache);null==o&&e.serverCache.isCompleteForChild(i)&&(o=u.getImmediateChild(i)),c=null!=o?t.filter.updateChild(u,i,o,dt(n),l,s):e.eventCache.getNode().hasChild(i)?t.filter.updateChild(u,i,Zt.EMPTY_NODE,dt(n),l,s):u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Ze(r,Ae(e)),a.isLeafNode()&&(c=t.filter.updateFullNode(c,a,s)))}return a=e.serverCache.isFullyInitialized()||null!=en(r,ut()),Re(e,c,a,t.filter.filtersNodes())}}(t,e,l.path,r,i,s):function(t,e,n,r,i,o,s){if(null!=en(i,n))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(mt(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return cn(t,e,n,l.getNode().getChild(n),i,o,a,s);if(mt(n)){let r=new $e(null);return l.getNode().forEachChild(Pt,((t,e)=>{r=r.set(new lt(t),e)})),pn(t,e,n,r,i,o,a,s)}return e}{let u=new $e(null);return r.foreach(((t,e)=>{const r=gt(n,t);l.isCompleteForPath(r)&&(u=u.set(t,l.getNode().getChild(r)))})),pn(t,e,n,u,i,o,a,s)}}(t,e,l.path,l.affectedTree,r,i,s)}else{if(n.type!==be.LISTEN_COMPLETE)throw(0,o.g5)("Unknown operation type: "+n.type);a=function(t,e,n,r,i){const o=e.serverCache;return un(t,Pe(e,o.getNode(),o.isFullyInitialized()||mt(n),o.isFiltered()),n,r,an,i)}(t,e,n.path,r,s)}const u=s.getChanges();return function(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=De(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(re(De(e)))}}(e,a,u),{viewCache:a,changes:u}}(t.processor_,i,e,n,r);var a,l;return a=t.processor_,l=s.viewCache,(0,o.hu)(l.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),(0,o.hu)(l.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),(0,o.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,bn(t,s.changes,s.viewCache.eventCache.getNode(),null)}function bn(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){const i=[],o=[];return e.forEach((e=>{var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),xe(t,i,"child_removed",e,r,n),xe(t,i,"child_added",e,r,n),xe(t,i,"child_moved",o,r,n),xe(t,i,"child_changed",e,r,n),xe(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}let wn,Cn;class Tn{constructor(){this.views=new Map}}function In(t,e,n,r){const i=e.source.queryId;if(null!==i){const s=t.views.get(i);return(0,o.hu)(null!=s,"SyncTree gave us an op for an invalid query."),yn(s,e,n,r)}{let i=[];for(const o of t.views.values())i=i.concat(yn(o,e,n,r));return i}}function En(t,e,n,r,i,o){const s=function(t,e,n,r,i){const o=e._queryIdentifier,s=t.views.get(o);if(!s){let t=Ze(n,i?r:null),o=!1;t?o=!0:r instanceof Zt?(t=Xe(n,r),o=!1):(t=Zt.EMPTY_NODE,o=!1);const s=Ne(new Se(t,o,!1),new Se(r,i,!1));return new _n(e,s)}return s}(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Bt,((t,e)=>{r.push(ie(t,e))})),n.isFullyInitialized()&&r.push(re(n.getNode())),bn(t,r,n.getNode(),e)}(s,n)}function Sn(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function kn(t,e){let n=null;for(const r of t.views.values())n=n||gn(r,e);return n}function xn(t,e){if(e._queryParams.loadsAllData())return Pn(t);{const n=e._queryIdentifier;return t.views.get(n)}}function Nn(t,e){return null!=xn(t,e)}function Rn(t){return null!=Pn(t)}function Pn(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Dn=1;class An{constructor(t){this.listenProvider_=t,this.syncPointTree_=new $e(null),this.pendingWriteTree_={visibleWrites:Le.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function On(t,e,n,r,i){return function(t,e,n,r,i){(0,o.hu)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Me(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?qn(t,new Ie({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function $n(t,e,n=!1){const r=function(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){const n=t.allWrites.findIndex((t=>t.writeId===e));(0,o.hu)(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,a=t.allWrites.length-1;for(;i&&a>=0;){const e=t.allWrites[a];e.visible&&(a>=n&&Ke(e,r.path)?i=!1:bt(r.path,e.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=Qe(t.allWrites,Ge,ut()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0):(r.snap?t.visibleWrites=je(t.visibleWrites,r.path):O(r.children,(e=>{t.visibleWrites=je(t.visibleWrites,gt(r.path,e))})),!0))}(t.pendingWriteTree_,e)){let e=new $e(null);return null!=r.snap?e=e.set(ut(),!0):O(r.children,(t=>{e=e.set(new lt(t),!0)})),qn(t,new Ce(r.path,e,n))}return[]}function Ln(t,e,n){return qn(t,new Ie({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Mn(t,e,n,r){const i=e._path,s=t.syncPointTree_.get(i);let a=[];if(s&&("default"===e._queryIdentifier||Nn(s,e))){const l=function(t,e,n,r){const i=e._queryIdentifier,s=[];let a=[];const l=Rn(t);if("default"===i)for(const[e,i]of t.views.entries())a=a.concat(vn(i,n,r)),mn(i)&&(t.views.delete(e),i.query._queryParams.loadsAllData()||s.push(i.query));else{const e=t.views.get(i);e&&(a=a.concat(vn(e,n,r)),mn(e)&&(t.views.delete(i),e.query._queryParams.loadsAllData()||s.push(e.query)))}return l&&!Rn(t)&&s.push(new((0,o.hu)(wn,"Reference.ts has not been loaded"),wn)(e._repo,e._path)),{removed:s,events:a}}(s,e,n,r);0===s.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=l.removed;a=l.events;const c=-1!==u.findIndex((t=>t._queryParams.loadsAllData())),h=t.syncPointTree_.findOnPath(i,((t,e)=>Rn(e)));if(c&&!h){const e=t.syncPointTree_.subtree(i);if(!e.isEmpty()){const n=function(t){return t.fold(((t,e,n)=>{if(e&&Rn(e))return[Pn(e)];{let t=[];return e&&(t=Sn(e)),O(n,((e,n)=>{t=t.concat(n)})),t}}))}(e);for(let e=0;e<n.length;++e){const r=n[e],i=r.query,o=Wn(t,r);t.listenProvider_.startListening(Gn(i),Bn(t,i),o.hashFn,o.onComplete)}}}if(!h&&u.length>0&&!r)if(c){const n=null;t.listenProvider_.stopListening(Gn(e),n)}else u.forEach((e=>{const n=t.queryToTagMap.get(Hn(e));t.listenProvider_.stopListening(Gn(e),n)}));!function(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const e=Hn(r),n=t.queryToTagMap.get(e);t.queryToTagMap.delete(e),t.tagToQueryMap.delete(n)}}}(t,u)}return a}function Fn(t,e,n){const r=e._path;let i=null,s=!1;t.syncPointTree_.foreachOnPath(r,((t,e)=>{const n=vt(t,r);i=i||kn(e,n),s=s||Rn(e)}));let a,l=t.syncPointTree_.get(r);l?(s=s||Rn(l),i=i||kn(l,ut())):(l=new Tn,t.syncPointTree_=t.syncPointTree_.set(r,l)),null!=i?a=!0:(a=!1,i=Zt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(((t,e)=>{const n=kn(e,ut());n&&(i=i.updateImmediateChild(t,n))})));const u=Nn(l,e);if(!u&&!e._queryParams.loadsAllData()){const n=Hn(e);(0,o.hu)(!t.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Dn++;t.queryToTagMap.set(n,r),t.tagToQueryMap.set(r,n)}let c=En(l,e,n,Ye(t.pendingWriteTree_,r),i,a);if(!u&&!s){const n=xn(l,e);c=c.concat(function(t,e,n){const r=e._path,i=Bn(t,e),s=Wn(t,n),a=t.listenProvider_.startListening(Gn(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)(0,o.hu)(!Rn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const e=l.fold(((t,e,n)=>{if(!mt(t)&&e&&Rn(e))return[Pn(e).query];{let t=[];return e&&(t=t.concat(Sn(e).map((t=>t.query)))),O(n,((e,n)=>{t=t.concat(n)})),t}}));for(let n=0;n<e.length;++n){const r=e[n];t.listenProvider_.stopListening(Gn(r),Bn(t,r))}}return a}(t,e,n))}return c}function jn(t,e,n){const r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,((t,n)=>{const r=kn(n,vt(t,e));if(r)return r}));return Je(r,e,i,n,!0)}function qn(t,e){return Un(e,t.syncPointTree_,null,Ye(t.pendingWriteTree_,ut()))}function Un(t,e,n,r){if(mt(t.path))return zn(t,e,n,r);{const i=e.get(ut());null==n&&null!=i&&(n=kn(i,ut()));let o=[];const s=ct(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){const t=n?n.getImmediateChild(s):null,e=rn(r,s);o=o.concat(Un(a,l,t,e))}return i&&(o=o.concat(In(i,t,r,n))),o}}function zn(t,e,n,r){const i=e.get(ut());null==n&&null!=i&&(n=kn(i,ut()));let o=[];return e.children.inorderTraversal(((e,i)=>{const s=n?n.getImmediateChild(e):null,a=rn(r,e),l=t.operationForChild(e);l&&(o=o.concat(zn(l,i,s,a)))})),i&&(o=o.concat(In(i,t,r,n))),o}function Wn(t,e){const n=e.query,r=Bn(t,n);return{hashFn:()=>{const t=function(t){return t.viewCache_.serverCache.getNode()}(e)||Zt.EMPTY_NODE;return t.hash()},onComplete:e=>{if("ok"===e)return r?function(t,e,n){const r=Vn(t,n);if(r){const n=Yn(r),i=n.path,o=n.queryId,s=vt(i,e);return Kn(t,i,new Te(we(o),s))}return[]}(t,n._path,r):function(t,e){return qn(t,new Te({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);{const r=function(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Mn(t,n,null,r)}}}}function Bn(t,e){const n=Hn(e);return t.queryToTagMap.get(n)}function Hn(t){return t._path.toString()+"$"+t._queryIdentifier}function Vn(t,e){return t.tagToQueryMap.get(e)}function Yn(t){const e=t.indexOf("$");return(0,o.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lt(t.substr(0,e))}}function Kn(t,e,n){const r=t.syncPointTree_.get(e);return(0,o.hu)(r,"Missing sync point for query tag that we're tracking"),In(r,n,Ye(t.pendingWriteTree_,e),null)}function Gn(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new((0,o.hu)(Cn,"Reference.ts has not been loaded"),Cn)(t._repo,t._path):t}class Qn{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Qn(e)}node(){return this.node_}}class Jn{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=gt(this.path_,t);return new Jn(this.syncTree_,e)}node(){return jn(this.syncTree_,this.path_)}}const Zn=function(t,e,n){return t&&"object"==typeof t?((0,o.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Xn(t[".sv"],e,n):"object"==typeof t[".sv"]?tr(t[".sv"],e):void(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Xn=function(t,e,n){if("timestamp"===t)return n.timestamp;(0,o.hu)(!1,"Unexpected server value: "+t)},tr=function(t,e,n){t.hasOwnProperty("increment")||(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&(0,o.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,o.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},er=function(t,e,n){return nr(t,new Qn(e),n)};function nr(t,e,n){const r=t.getPriority().val(),i=Zn(r,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const r=t,o=Zn(r.getValue(),e,n);return o!==r.getValue()||i!==r.getPriority().val()?new Wt(o,te(i)):t}{const r=t;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new Wt(i))),r.forEachChild(Bt,((t,r)=>{const i=nr(r,e.getImmediateChild(t),n);i!==r&&(o=o.updateImmediateChild(t,i))})),o}}class rr{constructor(t="",e=null,n={children:{},childCount:0}){this.name=t,this.parent=e,this.node=n}}function ir(t,e){let n=e instanceof lt?e:new lt(e),r=t,i=ct(n);for(;null!==i;){const t=(0,o.DV)(r.node.children,i)||{children:{},childCount:0};r=new rr(i,r,t),n=dt(n),i=ct(n)}return r}function or(t){return t.node.value}function sr(t,e){t.node.value=e,hr(t)}function ar(t){return t.node.childCount>0}function lr(t,e){O(t.node.children,((n,r)=>{e(new rr(n,t,r))}))}function ur(t,e,n,r){n&&!r&&e(t),lr(t,(t=>{ur(t,e,!0,r)})),n&&r&&e(t)}function cr(t){return new lt(null===t.parent?t.name:cr(t.parent)+"/"+t.name)}function hr(t){null!==t.parent&&function(t,e,n){const r=function(t){return void 0===or(t)&&!ar(t)}(n),i=(0,o.r3)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,hr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,hr(t))}(t.parent,t.name,t)}const dr=/[\[\].#$\/\u0000-\u001F\u007F]/,fr=/[\[\].#$\u0000-\u001F\u007F]/,pr=10485760,_r=function(t){return"string"==typeof t&&0!==t.length&&!dr.test(t)},gr=function(t){return"string"==typeof t&&0!==t.length&&!fr.test(t)},mr=function(t,e,n){const r=n instanceof lt?new wt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Tt(r));if("function"==typeof e)throw new Error(t+"contains a function "+Tt(r)+" with contents = "+e.toString());if(S(e))throw new Error(t+"contains "+e.toString()+" "+Tt(r));if("string"==typeof e&&e.length>pr/3&&(0,o.ug)(e)>pr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Tt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let n=!1,i=!1;if(O(e,((e,s)=>{if(".value"===e)n=!0;else if(".priority"!==e&&".sv"!==e&&(i=!0,!_r(e)))throw new Error(t+" contains an invalid key ("+e+") "+Tt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,o.ug)(e),Ct(t)}(r,e),mr(t,s,r),function(t){const e=t.parts_.pop();t.byteLength_-=(0,o.ug)(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)})),n&&i)throw new Error(t+' contains ".value" child '+Tt(r)+" in addition to actual children.")}},vr=function(t,e,n,r){if(!(r&&void 0===n||gr(n)))throw new Error((0,o.gK)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class yr{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function br(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null===n||yt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function wr(t,e,n){br(t,n),Tr(t,(t=>yt(t,e)))}function Cr(t,e,n){br(t,n),Tr(t,(t=>bt(t,e)||bt(e,t)))}function Tr(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(Ir(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Ir(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();y&&w("event: "+n.toString()),F(r)}}}const Er="repo_interrupt";class Sr{constructor(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_e(),this.transactionQueueTree_=new rr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kr(t,e,n){if(t.stats_=J(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new fe(t.repoInfo_,((e,n,r,i)=>{Rr(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((()=>Pr(t,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.Pz)(n)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new St(t.repoInfo_,e,((e,n,r,i)=>{Rr(t,e,n,r,i)}),(e=>{Pr(t,e)}),(e=>{!function(t,e){O(e,((e,n)=>{Dr(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((e=>{t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((e=>{t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=function(e,n){const r=e.toString();return Q[r]||(Q[r]=new ye(t.stats_,t.server_)),Q[r]}(t.repoInfo_),t.infoData_=new pe,t.infoSyncTree_=new An({startListening:(e,n,r,i)=>{let o=[];const s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Ln(t.infoSyncTree_,e._path,s),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),Dr(t,"connected",!1),t.serverSyncTree_=new An({startListening:(e,n,r,i)=>(t.server_.listen(e,r,n,((n,r)=>{const o=i(n,r);Cr(t.eventQueue_,e._path,o)})),[]),stopListening:(e,n)=>{t.server_.unlisten(e,n)}})}function xr(t){const e=t.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Nr(t){return(e=(e={timestamp:xr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Rr(t,e,n,r,i){t.dataUpdateCount++;const s=new lt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(i)if(r){const e=(0,o.UI)(n,(t=>te(t)));a=function(t,e,n,r){const i=Vn(t,r);if(i){const r=Yn(i),o=r.path,s=r.queryId,a=vt(o,e),l=$e.fromObject(n);return Kn(t,o,new Ee(we(s),a,l))}return[]}(t.serverSyncTree_,s,e,i)}else{const e=te(n);a=function(t,e,n,r){const i=Vn(t,r);if(null!=i){const r=Yn(i),o=r.path,s=r.queryId,a=vt(o,e);return Kn(t,o,new Ie(we(s),a,n))}return[]}(t.serverSyncTree_,s,e,i)}else if(r){const e=(0,o.UI)(n,(t=>te(t)));a=function(t,e,n){const r=$e.fromObject(n);return qn(t,new Ee({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,e)}else{const e=te(n);a=Ln(t.serverSyncTree_,s,e)}let l=s;a.length>0&&(l=jr(t,s)),Cr(t.eventQueue_,l,a)}function Pr(t,e){Dr(t,"connected",e),!1===e&&function(t){Lr(t,"onDisconnectEvents");const e=Nr(t),n=_e();me(t.onDisconnect_,ut(),((r,i)=>{const o=function(t,e,n,r){return nr(e,new Jn(n,t),r)}(r,i,t.serverSyncTree_,e);ge(n,r,o)}));let r=[];me(n,ut(),((e,n)=>{r=r.concat(Ln(t.serverSyncTree_,e,n));const i=function(t,e){const n=cr(qr(t,e)),r=ir(t.transactionQueueTree_,e);return function(t,e,n){let r=void 0?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,(e=>{Br(t,e)})),Br(t,r),ur(r,(e=>{Br(t,e)})),n}(t,e);jr(t,i)})),t.onDisconnect_=_e(),Cr(t.eventQueue_,ut(),r)}(t)}function Dr(t,e,n){const r=new lt("/.info/"+e),i=te(n);t.infoData_.updateSnapshot(r,i);const o=Ln(t.infoSyncTree_,r,i);Cr(t.eventQueue_,r,o)}function Ar(t){return t.nextWriteId_++}function Or(t,e,n){let r;r=".info"===ct(e._path)?Mn(t.infoSyncTree_,e,n):Mn(t.serverSyncTree_,e,n),wr(t.eventQueue_,e._path,r)}function $r(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Er)}function Lr(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),w(n,...e)}function Mr(t,e,n){return jn(t.serverSyncTree_,e,n)||Zt.EMPTY_NODE}function Fr(t,e=t.transactionQueueTree_){if(e||Wr(t,e),or(e)){const n=Ur(t,e);(0,o.hu)(n.length>0,"Sending zero length transaction queue"),n.every((t=>0===t.status))&&function(t,e,n){const r=n.map((t=>t.currentWriteId)),i=Mr(t,e,r);let s=i;const a=i.hash();for(let t=0;t<n.length;t++){const r=n[t];(0,o.hu)(0===r.status,"tryToSendTransactionQueue_: items in queue should all be run."),r.status=1,r.retryCount++;const i=vt(e,r.path);s=s.updateChild(i,r.currentOutputSnapshotRaw)}const l=s.val(!0),u=e;t.server_.put(u.toString(),l,(r=>{Lr(t,"transaction put response",{path:u.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let e=0;e<n.length;e++)n[e].status=2,i=i.concat($n(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&r.push((()=>n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved))),n[e].unwatcher();Wr(t,ir(t.transactionQueueTree_,e)),Fr(t,t.transactionQueueTree_),Cr(t.eventQueue_,e,i);for(let t=0;t<r.length;t++)F(r[t])}else{if("datastale"===r)for(let t=0;t<n.length;t++)3===n[t].status?n[t].status=4:n[t].status=0;else{E("transaction at "+u.toString()+" failed: "+r);for(let t=0;t<n.length;t++)n[t].status=4,n[t].abortReason=r}jr(t,e)}}),a)}(t,cr(e),n)}else ar(e)&&lr(e,(e=>{Fr(t,e)}))}function jr(t,e){const n=qr(t,e),r=cr(n);return function(t,e,n){if(0===e.length)return;const r=[];let i=[];const s=e.filter((t=>0===t.status)).map((t=>t.currentWriteId));for(let l=0;l<e.length;l++){const u=e[l],c=vt(n,u.path);let h,d=!1;if((0,o.hu)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)d=!0,h=u.abortReason,i=i.concat($n(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)d=!0,h="maxretry",i=i.concat($n(t.serverSyncTree_,u.currentWriteId,!0));else{const n=Mr(t,u.path,s);u.currentInputSnapshot=n;const r=e[l].update(n.val());if(void 0!==r){mr("transaction failed: Data returned ",r,u.path);let e=te(r);"object"==typeof r&&null!=r&&(0,o.r3)(r,".priority")||(e=e.updatePriority(n.getPriority()));const a=u.currentWriteId,l=Nr(t),c=er(e,n,l);u.currentOutputSnapshotRaw=e,u.currentOutputSnapshotResolved=c,u.currentWriteId=Ar(t),s.splice(s.indexOf(a),1),i=i.concat(On(t.serverSyncTree_,u.path,c,u.currentWriteId,u.applyLocally)),i=i.concat($n(t.serverSyncTree_,a,!0))}else d=!0,h="nodata",i=i.concat($n(t.serverSyncTree_,u.currentWriteId,!0))}Cr(t.eventQueue_,n,i),i=[],d&&(e[l].status=2,a=e[l].unwatcher,setTimeout(a,Math.floor(0)),e[l].onComplete&&("nodata"===h?r.push((()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot))):r.push((()=>e[l].onComplete(new Error(h),!1,null)))))}var a;Wr(t,t.transactionQueueTree_);for(let t=0;t<r.length;t++)F(r[t]);Fr(t,t.transactionQueueTree_)}(t,Ur(t,n),r),r}function qr(t,e){let n,r=t.transactionQueueTree_;for(n=ct(e);null!==n&&void 0===or(r);)r=ir(r,n),n=ct(e=dt(e));return r}function Ur(t,e){const n=[];return zr(t,e,n),n.sort(((t,e)=>t.order-e.order)),n}function zr(t,e,n){const r=or(e);if(r)for(let t=0;t<r.length;t++)n.push(r[t]);lr(e,(e=>{zr(t,e,n)}))}function Wr(t,e){const n=or(e);if(n){let t=0;for(let e=0;e<n.length;e++)2!==n[e].status&&(n[t]=n[e],t++);n.length=t,sr(e,n.length>0?n:void 0)}lr(e,(e=>{Wr(t,e)}))}function Br(t,e){const n=or(e);if(n){const r=[];let i=[],s=-1;for(let e=0;e<n.length;e++)3===n[e].status||(1===n[e].status?((0,o.hu)(s===e-1,"All SENT items should be at beginning of queue."),s=e,n[e].status=3,n[e].abortReason="set"):((0,o.hu)(0===n[e].status,"Unexpected transaction status in abort"),n[e].unwatcher(),i=i.concat($n(t.serverSyncTree_,n[e].currentWriteId,!0)),n[e].onComplete&&r.push(n[e].onComplete.bind(null,new Error("set"),!1,null))));-1===s?sr(e,void 0):n.length=s+1,Cr(t.eventQueue_,cr(e),i);for(let t=0;t<r.length;t++)F(r[t])}}const Hr=function(t,e){const n=Vr(t),r=n.namespace;"firebase.com"===n.domain&&I(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||I("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new V(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new lt(n.pathString)}},Vr=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",l=443;if("string"==typeof t){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");-1===c&&(c=t.length);let h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(c,h)),c<h&&(i=function(t){let e="";const n=t.split("/");for(let t=0;t<n.length;t++)if(n[t].length>0){let r=n[t];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(t){}e+="/"+r}return e}(t.substring(c,h)));const d=function(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):E(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(s="https"===a||"wss"===a,l=parseInt(e.substring(u+1),10)):u=e.length;const f=e.slice(0,u);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const t=e.indexOf(".");r=e.substring(0,t).toLowerCase(),n=e.substring(t+1),o=r}"ns"in d&&(o=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};class Yr{constructor(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.Pz)(this.snapshot.exportVal())}}class Kr{constructor(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Gr{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,o.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class Qr{constructor(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}get key(){return mt(this._path)?null:ft(this._path)}get ref(){return new Jr(this._repo,this._path)}get _queryIdentifier(){const t=de(this._queryParams),e=D(t);return"{}"===e?"default":e}get _queryObject(){return de(this._queryParams)}isEqual(t){if(!((t=(0,o.m9)(t))instanceof Qr))return!1;const e=this._repo===t._repo,n=yt(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return e&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class Jr extends Qr{constructor(t,e){super(t,e,new ce,!1)}get parent(){const t=_t(this._path);return null===t?null:new Jr(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Zr{constructor(t,e,n){this._node=t,this.ref=e,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new lt(t),n=ti(this.ref,t);return new Zr(this._node.getChild(e),n,Bt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,((e,n)=>t(new Zr(n,ti(this.ref,e),Bt))))}hasChild(t){const e=new lt(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Xr(t,e){return(t=(0,o.m9)(t))._checkNotDeleted("ref"),void 0!==e?ti(t._root,e):t._root}function ti(t,e){var n;return null===ct((t=(0,o.m9)(t))._path)?("child","path",!1,(n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),vr("child","path",n,false)):vr("child","path",e,!1),new Jr(t._repo,gt(t._path,e))}class ei{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const n=e._queryParams.getIndex();return new Yr("value",this,new Zr(t.snapshotNode,new Jr(e._repo,e._path),n))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Kr(this,t,e):null}matches(t){return t instanceof ei&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ni{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Kr(this,t,e):null}createEvent(t,e){(0,o.hu)(null!=t.childName,"Child events should have a childName.");const n=ti(new Jr(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Yr(t.type,this,new Zr(t.snapshotNode,n,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof ni&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ri(t,e,n,r){return function(t,e,n,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const e=n,r=(n,r)=>{Or(t._repo,t,a),e(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const s=new Gr(n,o||void 0),a="value"===e?new ei(s):new ni(e,s);return function(t,e,n){let r;r=".info"===ct(e._path)?Fn(t.infoSyncTree_,e,n):Fn(t.serverSyncTree_,e,n),wr(t.eventQueue_,e._path,r)}(t._repo,t,a),()=>Or(t._repo,t,a)}(t,"value",e,n,r)}!function(t){(0,o.hu)(!wn,"__referenceConstructor has already been defined"),wn=t}(Jr),function(t){(0,o.hu)(!Cn,"__referenceConstructor has already been defined"),Cn=t}(Jr);const ii={};function oi(t,e,n,r,i){let s=r||t.options.databaseURL;void 0===s&&(t.options.projectId||I("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),w("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a,l,u=Hr(s,i),c=u.repoInfo;"undefined"!=typeof process&&process.env&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(a=!0,s=`http://${l}?ns=${c.namespace}`,u=Hr(s,i),c=u.repoInfo):a=!u.repoInfo.secure;const h=i&&a?new z(z.OWNER):new U(t.name,t.options,e);(function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!_r(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),gr(t)}(n))throw new Error((0,o.gK)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",u),mt(u.path)||I("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(t,e,n,r){let i=ii[e.name];i||(i={},ii[e.name]=i);let o=i[t.toURLString()];return o&&I("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Sr(t,false,n,r),i[t.toURLString()]=o,o}(c,t,h,new q(t.name,n));return new si(d,t)}class si{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(kr(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jr(this._repo,ut())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(t,e){const n=ii[e];n&&n[t.key]===t||I(`Database ${e}(${t.repoInfo_}) has already been deleted.`),$r(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&I("Cannot call "+t+" on a deleted database.")}}function ai(t=(0,r.Mq)(),e){return(0,r.qX)(t,"database").getImmediate({identifier:e})}function li(t){(t=(0,o.m9)(t))._checkNotDeleted("goOffline"),$r(t._repo)}function ui(t){var e;(t=(0,o.m9)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Er)}St.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},St.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function(t){u=t}(r.Jn),(0,r.Xd)(new i.wA("database",((t,{instanceIdentifier:e})=>oi(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e)),"PUBLIC").setMultipleInstances(!0)),(0,r.KN)(a,l,undefined),(0,r.KN)(a,l,"esm2017")},486:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",l=32,u=128,c=1/0,h=9007199254740991,d=NaN,f=4294967295,p=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],_="[object Arguments]",g="[object Array]",m="[object Boolean]",v="[object Date]",y="[object Error]",b="[object Function]",w="[object GeneratorFunction]",C="[object Map]",T="[object Number]",I="[object Object]",E="[object Promise]",S="[object RegExp]",k="[object Set]",x="[object String]",N="[object Symbol]",R="[object WeakMap]",P="[object ArrayBuffer]",D="[object DataView]",A="[object Float32Array]",O="[object Float64Array]",$="[object Int8Array]",L="[object Int16Array]",M="[object Int32Array]",F="[object Uint8Array]",j="[object Uint8ClampedArray]",q="[object Uint16Array]",U="[object Uint32Array]",z=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,B=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,V=/[&<>"']/g,Y=RegExp(H.source),K=RegExp(V.source),G=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ut=/[()=,{}\[\]\/\s]/,ct=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,_t=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,mt=/^(?:0|[1-9]\d*)$/,vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yt=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ct="a-z\\xdf-\\xf6\\xf8-\\xff",Tt="A-Z\\xc0-\\xd6\\xd8-\\xde",It="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Et="["+It+"]",St="["+wt+"]",kt="\\d+",xt="["+Ct+"]",Nt="[^\\ud800-\\udfff"+It+kt+"\\u2700-\\u27bf"+Ct+Tt+"]",Rt="\\ud83c[\\udffb-\\udfff]",Pt="[^\\ud800-\\udfff]",Dt="(?:\\ud83c[\\udde6-\\uddff]){2}",At="[\\ud800-\\udbff][\\udc00-\\udfff]",Ot="["+Tt+"]",$t="(?:"+xt+"|"+Nt+")",Lt="(?:"+Ot+"|"+Nt+")",Mt="(?:['](?:d|ll|m|re|s|t|ve))?",Ft="(?:['](?:D|LL|M|RE|S|T|VE))?",jt="(?:"+St+"|"+Rt+")?",qt="[\\ufe0e\\ufe0f]?",Ut=qt+jt+"(?:\\u200d(?:"+[Pt,Dt,At].join("|")+")"+qt+jt+")*",zt="(?:"+["[\\u2700-\\u27bf]",Dt,At].join("|")+")"+Ut,Wt="(?:"+[Pt+St+"?",St,Dt,At,"[\\ud800-\\udfff]"].join("|")+")",Bt=RegExp("[']","g"),Ht=RegExp(St,"g"),Vt=RegExp(Rt+"(?="+Rt+")|"+Wt+Ut,"g"),Yt=RegExp([Ot+"?"+xt+"+"+Mt+"(?="+[Et,Ot,"$"].join("|")+")",Lt+"+"+Ft+"(?="+[Et,Ot+$t,"$"].join("|")+")",Ot+"?"+$t+"+"+Mt,Ot+"+"+Ft,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kt,zt].join("|"),"g"),Kt=RegExp("[\\u200d\\ud800-\\udfff"+wt+"\\ufe0e\\ufe0f]"),Gt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Jt=-1,Zt={};Zt[A]=Zt[O]=Zt[$]=Zt[L]=Zt[M]=Zt[F]=Zt[j]=Zt[q]=Zt[U]=!0,Zt[_]=Zt[g]=Zt[P]=Zt[m]=Zt[D]=Zt[v]=Zt[y]=Zt[b]=Zt[C]=Zt[T]=Zt[I]=Zt[S]=Zt[k]=Zt[x]=Zt[R]=!1;var Xt={};Xt[_]=Xt[g]=Xt[P]=Xt[D]=Xt[m]=Xt[v]=Xt[A]=Xt[O]=Xt[$]=Xt[L]=Xt[M]=Xt[C]=Xt[T]=Xt[I]=Xt[S]=Xt[k]=Xt[x]=Xt[N]=Xt[F]=Xt[j]=Xt[q]=Xt[U]=!0,Xt[y]=Xt[b]=Xt[R]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,re="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ie="object"==typeof self&&self&&self.Object===Object&&self,oe=re||ie||Function("return this")(),se=e&&!e.nodeType&&e,ae=se&&t&&!t.nodeType&&t,le=ae&&ae.exports===se,ue=le&&re.process,ce=function(){try{return ae&&ae.require&&ae.require("util").types||ue&&ue.binding&&ue.binding("util")}catch(t){}}(),he=ce&&ce.isArrayBuffer,de=ce&&ce.isDate,fe=ce&&ce.isMap,pe=ce&&ce.isRegExp,_e=ce&&ce.isSet,ge=ce&&ce.isTypedArray;function me(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ve(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function ye(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function be(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function we(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ce(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Te(t,e){return!(null==t||!t.length)&&Ae(t,e,0)>-1}function Ie(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Ee(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Se(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ke(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function xe(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Ne(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Re=Me("length");function Pe(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function De(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ae(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):De(t,$e,n)}function Oe(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function $e(t){return t!=t}function Le(t,e){var n=null==t?0:t.length;return n?qe(t,e)/n:d}function Me(t){return function(e){return null==e?i:e[t]}}function Fe(t){return function(e){return null==t?i:t[e]}}function je(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function qe(t,e){for(var n,r=-1,o=t.length;++r<o;){var s=e(t[r]);s!==i&&(n=n===i?s:n+s)}return n}function Ue(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function ze(t){return t?t.slice(0,an(t)+1).replace(rt,""):t}function We(t){return function(e){return t(e)}}function Be(t,e){return Ee(e,(function(e){return t[e]}))}function He(t,e){return t.has(e)}function Ve(t,e){for(var n=-1,r=t.length;++n<r&&Ae(e,t[n],0)>-1;);return n}function Ye(t,e){for(var n=t.length;n--&&Ae(e,t[n],0)>-1;);return n}function Ke(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Ge=Fe({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),Qe=Fe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Je(t){return"\\"+te[t]}function Ze(t){return Kt.test(t)}function Xe(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function on(t){return Ze(t)?function(t){for(var e=Vt.lastIndex=0;Vt.test(t);)++e;return e}(t):Re(t)}function sn(t){return Ze(t)?function(t){return t.match(Vt)||[]}(t):function(t){return t.split("")}(t)}function an(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var ln=Fe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),un=function t(e){var n,r=(e=null==e?oe:un.defaults(oe.Object(),e,un.pick(oe,Qt))).Array,it=e.Date,wt=e.Error,Ct=e.Function,Tt=e.Math,It=e.Object,Et=e.RegExp,St=e.String,kt=e.TypeError,xt=r.prototype,Nt=Ct.prototype,Rt=It.prototype,Pt=e["__core-js_shared__"],Dt=Nt.toString,At=Rt.hasOwnProperty,Ot=0,$t=(n=/[^.]+$/.exec(Pt&&Pt.keys&&Pt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Lt=Rt.toString,Mt=Dt.call(It),Ft=oe._,jt=Et("^"+Dt.call(At).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=le?e.Buffer:i,Ut=e.Symbol,zt=e.Uint8Array,Wt=qt?qt.allocUnsafe:i,Vt=tn(It.getPrototypeOf,It),Kt=It.create,te=Rt.propertyIsEnumerable,re=xt.splice,ie=Ut?Ut.isConcatSpreadable:i,se=Ut?Ut.iterator:i,ae=Ut?Ut.toStringTag:i,ue=function(){try{var t=uo(It,"defineProperty");return t({},"",{}),t}catch(t){}}(),ce=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,Re=it&&it.now!==oe.Date.now&&it.now,Fe=e.setTimeout!==oe.setTimeout&&e.setTimeout,cn=Tt.ceil,hn=Tt.floor,dn=It.getOwnPropertySymbols,fn=qt?qt.isBuffer:i,pn=e.isFinite,_n=xt.join,gn=tn(It.keys,It),mn=Tt.max,vn=Tt.min,yn=it.now,bn=e.parseInt,wn=Tt.random,Cn=xt.reverse,Tn=uo(e,"DataView"),In=uo(e,"Map"),En=uo(e,"Promise"),Sn=uo(e,"Set"),kn=uo(e,"WeakMap"),xn=uo(It,"create"),Nn=kn&&new kn,Rn={},Pn=jo(Tn),Dn=jo(In),An=jo(En),On=jo(Sn),$n=jo(kn),Ln=Ut?Ut.prototype:i,Mn=Ln?Ln.valueOf:i,Fn=Ln?Ln.toString:i;function jn(t){if(na(t)&&!Hs(t)&&!(t instanceof Wn)){if(t instanceof zn)return t;if(At.call(t,"__wrapped__"))return qo(t)}return new zn(t)}var qn=function(){function t(){}return function(e){if(!ea(e))return{};if(Kt)return Kt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Un(){}function zn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Wn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Bn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Vn;++e<n;)this.add(t[e])}function Kn(t){var e=this.__data__=new Hn(t);this.size=e.size}function Gn(t,e){var n=Hs(t),r=!n&&Bs(t),i=!n&&!r&&Gs(t),o=!n&&!r&&!i&&ca(t),s=n||r||i||o,a=s?Ue(t.length,St):[],l=a.length;for(var u in t)!e&&!At.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||mo(u,l))||a.push(u);return a}function Qn(t){var e=t.length;return e?t[Vr(0,e-1)]:i}function Jn(t,e){return Oo(ki(t),sr(e,0,t.length))}function Zn(t){return Oo(ki(t))}function Xn(t,e,n){(n!==i&&!Us(t[e],n)||n===i&&!(e in t))&&ir(t,e,n)}function tr(t,e,n){var r=t[e];At.call(t,e)&&Us(r,n)&&(n!==i||e in t)||ir(t,e,n)}function er(t,e){for(var n=t.length;n--;)if(Us(t[n][0],e))return n;return-1}function nr(t,e,n,r){return hr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function rr(t,e){return t&&xi(e,Da(e),t)}function ir(t,e,n){"__proto__"==e&&ue?ue(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function or(t,e){for(var n=-1,o=e.length,s=r(o),a=null==t;++n<o;)s[n]=a?i:ka(t,e[n]);return s}function sr(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ar(t,e,n,r,o,s){var a,l=1&e,u=2&e,c=4&e;if(n&&(a=o?n(t,r,o,s):n(t)),a!==i)return a;if(!ea(t))return t;var h=Hs(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&At.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return ki(t,a)}else{var d=fo(t),f=d==b||d==w;if(Gs(t))return wi(t,l);if(d==I||d==_||f&&!o){if(a=u||f?{}:_o(t),!l)return u?function(t,e){return xi(t,ho(t),e)}(t,function(t,e){return t&&xi(e,Aa(e),t)}(a,t)):function(t,e){return xi(t,co(t),e)}(t,rr(a,t))}else{if(!Xt[d])return o?t:{};a=function(t,e,n){var r,i=t.constructor;switch(e){case P:return Ci(t);case m:case v:return new i(+t);case D:return function(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case A:case O:case $:case L:case M:case F:case j:case q:case U:return Ti(t,n);case C:return new i;case T:case x:return new i(t);case S:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case k:return new i;case N:return r=t,Mn?It(Mn.call(r)):{}}}(t,d,l)}}s||(s=new Kn);var p=s.get(t);if(p)return p;s.set(t,a),aa(t)?t.forEach((function(r){a.add(ar(r,e,n,r,t,s))})):ra(t)&&t.forEach((function(r,i){a.set(i,ar(r,e,n,i,t,s))}));var g=h?i:(c?u?no:eo:u?Aa:Da)(t);return ye(g||t,(function(r,i){g&&(r=t[i=r]),tr(a,i,ar(r,e,n,i,t,s))})),a}function lr(t,e,n){var r=n.length;if(null==t)return!r;for(t=It(t);r--;){var o=n[r],s=e[o],a=t[o];if(a===i&&!(o in t)||!s(a))return!1}return!0}function ur(t,e,n){if("function"!=typeof t)throw new kt(o);return Ro((function(){t.apply(i,n)}),e)}function cr(t,e,n,r){var i=-1,o=Te,s=!0,a=t.length,l=[],u=e.length;if(!a)return l;n&&(e=Ee(e,We(n))),r?(o=Ie,s=!1):e.length>=200&&(o=He,s=!1,e=new Yn(e));t:for(;++i<a;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,s&&h==h){for(var d=u;d--;)if(e[d]===h)continue t;l.push(c)}else o(e,h,r)||l.push(c)}return l}jn.templateSettings={escape:G,evaluate:Q,interpolate:J,variable:"",imports:{_:jn}},jn.prototype=Un.prototype,jn.prototype.constructor=jn,zn.prototype=qn(Un.prototype),zn.prototype.constructor=zn,Wn.prototype=qn(Un.prototype),Wn.prototype.constructor=Wn,Bn.prototype.clear=function(){this.__data__=xn?xn(null):{},this.size=0},Bn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Bn.prototype.get=function(t){var e=this.__data__;if(xn){var n=e[t];return n===s?i:n}return At.call(e,t)?e[t]:i},Bn.prototype.has=function(t){var e=this.__data__;return xn?e[t]!==i:At.call(e,t)},Bn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=xn&&e===i?s:e,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(t){var e=this.__data__,n=er(e,t);return!(n<0||(n==e.length-1?e.pop():re.call(e,n,1),--this.size,0))},Hn.prototype.get=function(t){var e=this.__data__,n=er(e,t);return n<0?i:e[n][1]},Hn.prototype.has=function(t){return er(this.__data__,t)>-1},Hn.prototype.set=function(t,e){var n=this.__data__,r=er(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Vn.prototype.clear=function(){this.size=0,this.__data__={hash:new Bn,map:new(In||Hn),string:new Bn}},Vn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Vn.prototype.get=function(t){return ao(this,t).get(t)},Vn.prototype.has=function(t){return ao(this,t).has(t)},Vn.prototype.set=function(t,e){var n=ao(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Yn.prototype.add=Yn.prototype.push=function(t){return this.__data__.set(t,s),this},Yn.prototype.has=function(t){return this.__data__.has(t)},Kn.prototype.clear=function(){this.__data__=new Hn,this.size=0},Kn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Kn.prototype.get=function(t){return this.__data__.get(t)},Kn.prototype.has=function(t){return this.__data__.has(t)},Kn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Hn){var r=n.__data__;if(!In||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Vn(r)}return n.set(t,e),this.size=n.size,this};var hr=Pi(yr),dr=Pi(br,!0);function fr(t,e){var n=!0;return hr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function pr(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],a=e(s);if(null!=a&&(l===i?a==a&&!ua(a):n(a,l)))var l=a,u=s}return u}function _r(t,e){var n=[];return hr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function gr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=go),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?gr(a,e-1,n,r,i):Se(i,a):r||(i[i.length]=a)}return i}var mr=Di(),vr=Di(!0);function yr(t,e){return t&&mr(t,e,Da)}function br(t,e){return t&&vr(t,e,Da)}function wr(t,e){return Ce(e,(function(e){return Zs(t[e])}))}function Cr(t,e){for(var n=0,r=(e=mi(e,t)).length;null!=t&&n<r;)t=t[Fo(e[n++])];return n&&n==r?t:i}function Tr(t,e,n){var r=e(t);return Hs(t)?r:Se(r,n(t))}function Ir(t){return null==t?t===i?"[object Undefined]":"[object Null]":ae&&ae in It(t)?function(t){var e=At.call(t,ae),n=t[ae];try{t[ae]=i;var r=!0}catch(t){}var o=Lt.call(t);return r&&(e?t[ae]=n:delete t[ae]),o}(t):function(t){return Lt.call(t)}(t)}function Er(t,e){return t>e}function Sr(t,e){return null!=t&&At.call(t,e)}function kr(t,e){return null!=t&&e in It(t)}function xr(t,e,n){for(var o=n?Ie:Te,s=t[0].length,a=t.length,l=a,u=r(a),c=1/0,h=[];l--;){var d=t[l];l&&e&&(d=Ee(d,We(e))),c=vn(d.length,c),u[l]=!n&&(e||s>=120&&d.length>=120)?new Yn(l&&d):i}d=t[0];var f=-1,p=u[0];t:for(;++f<s&&h.length<c;){var _=d[f],g=e?e(_):_;if(_=n||0!==_?_:0,!(p?He(p,g):o(h,g,n))){for(l=a;--l;){var m=u[l];if(!(m?He(m,g):o(t[l],g,n)))continue t}p&&p.push(g),h.push(_)}}return h}function Nr(t,e,n){var r=null==(t=So(t,e=mi(e,t)))?t:t[Fo(Jo(e))];return null==r?i:me(r,t,n)}function Rr(t){return na(t)&&Ir(t)==_}function Pr(t,e,n,r,o){return t===e||(null==t||null==e||!na(t)&&!na(e)?t!=t&&e!=e:function(t,e,n,r,o,s){var a=Hs(t),l=Hs(e),u=a?g:fo(t),c=l?g:fo(e),h=(u=u==_?I:u)==I,d=(c=c==_?I:c)==I,f=u==c;if(f&&Gs(t)){if(!Gs(e))return!1;a=!0,h=!1}if(f&&!h)return s||(s=new Kn),a||ca(t)?Xi(t,e,n,r,o,s):function(t,e,n,r,i,o,s){switch(n){case D:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!o(new zt(t),new zt(e)));case m:case v:case T:return Us(+t,+e);case y:return t.name==e.name&&t.message==e.message;case S:case x:return t==e+"";case C:var a=Xe;case k:var l=1&r;if(a||(a=nn),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;r|=2,s.set(t,e);var c=Xi(a(t),a(e),r,i,o,s);return s.delete(t),c;case N:if(Mn)return Mn.call(t)==Mn.call(e)}return!1}(t,e,u,n,r,o,s);if(!(1&n)){var p=h&&At.call(t,"__wrapped__"),b=d&&At.call(e,"__wrapped__");if(p||b){var w=p?t.value():t,E=b?e.value():e;return s||(s=new Kn),o(w,E,n,r,s)}}return!!f&&(s||(s=new Kn),function(t,e,n,r,o,s){var a=1&n,l=eo(t),u=l.length;if(u!=eo(e).length&&!a)return!1;for(var c=u;c--;){var h=l[c];if(!(a?h in e:At.call(e,h)))return!1}var d=s.get(t),f=s.get(e);if(d&&f)return d==e&&f==t;var p=!0;s.set(t,e),s.set(e,t);for(var _=a;++c<u;){var g=t[h=l[c]],m=e[h];if(r)var v=a?r(m,g,h,e,t,s):r(g,m,h,t,e,s);if(!(v===i?g===m||o(g,m,n,r,s):v)){p=!1;break}_||(_="constructor"==h)}if(p&&!_){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,r,o,s))}(t,e,n,r,Pr,o))}function Dr(t,e,n,r){var o=n.length,s=o,a=!r;if(null==t)return!s;for(t=It(t);o--;){var l=n[o];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<s;){var u=(l=n[o])[0],c=t[u],h=l[1];if(a&&l[2]){if(c===i&&!(u in t))return!1}else{var d=new Kn;if(r)var f=r(c,h,u,t,e,d);if(!(f===i?Pr(h,c,3,r,d):f))return!1}}return!0}function Ar(t){return!(!ea(t)||(e=t,$t&&$t in e))&&(Zs(t)?jt:_t).test(jo(t));var e}function Or(t){return"function"==typeof t?t:null==t?il:"object"==typeof t?Hs(t)?jr(t[0],t[1]):Fr(t):fl(t)}function $r(t){if(!Co(t))return gn(t);var e=[];for(var n in It(t))At.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Lr(t,e){return t<e}function Mr(t,e){var n=-1,i=Ys(t)?r(t.length):[];return hr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Fr(t){var e=lo(t);return 1==e.length&&e[0][2]?Io(e[0][0],e[0][1]):function(n){return n===t||Dr(n,t,e)}}function jr(t,e){return yo(t)&&To(e)?Io(Fo(t),e):function(n){var r=ka(n,t);return r===i&&r===e?xa(n,t):Pr(e,r,3)}}function qr(t,e,n,r,o){t!==e&&mr(e,(function(s,a){if(o||(o=new Kn),ea(s))!function(t,e,n,r,o,s,a){var l=xo(t,n),u=xo(e,n),c=a.get(u);if(c)Xn(t,n,c);else{var h=s?s(l,u,n+"",t,e,a):i,d=h===i;if(d){var f=Hs(u),p=!f&&Gs(u),_=!f&&!p&&ca(u);h=u,f||p||_?Hs(l)?h=l:Ks(l)?h=ki(l):p?(d=!1,h=wi(u,!0)):_?(d=!1,h=Ti(u,!0)):h=[]:oa(u)||Bs(u)?(h=l,Bs(l)?h=va(l):ea(l)&&!Zs(l)||(h=_o(u))):d=!1}d&&(a.set(u,h),o(h,u,r,s,a),a.delete(u)),Xn(t,n,h)}}(t,e,a,n,qr,r,o);else{var l=r?r(xo(t,a),s,a+"",t,e,o):i;l===i&&(l=s),Xn(t,a,l)}}),Aa)}function Ur(t,e){var n=t.length;if(n)return mo(e+=e<0?n:0,n)?t[e]:i}function zr(t,e,n){e=e.length?Ee(e,(function(t){return Hs(t)?function(e){return Cr(e,1===t.length?t[0]:t)}:t})):[il];var r=-1;e=Ee(e,We(so()));var i=Mr(t,(function(t,n,i){var o=Ee(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var l=Ii(i[r],o[r]);if(l)return r>=a?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function Wr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=Cr(t,s);n(a,s)&&Jr(o,mi(s,t),a)}return o}function Br(t,e,n,r){var i=r?Oe:Ae,o=-1,s=e.length,a=t;for(t===e&&(e=ki(e)),n&&(a=Ee(t,We(n)));++o<s;)for(var l=0,u=e[o],c=n?n(u):u;(l=i(a,c,l,r))>-1;)a!==t&&re.call(a,l,1),re.call(t,l,1);return t}function Hr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;mo(i)?re.call(t,i,1):ui(t,i)}}return t}function Vr(t,e){return t+hn(wn()*(e-t+1))}function Yr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=hn(e/2))&&(t+=t)}while(e);return n}function Kr(t,e){return Po(Eo(t,e,il),t+"")}function Gr(t){return Qn(Ua(t))}function Qr(t,e){var n=Ua(t);return Oo(n,sr(e,0,n.length))}function Jr(t,e,n,r){if(!ea(t))return t;for(var o=-1,s=(e=mi(e,t)).length,a=s-1,l=t;null!=l&&++o<s;){var u=Fo(e[o]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=a){var h=l[u];(c=r?r(h,u,l):i)===i&&(c=ea(h)?h:mo(e[o+1])?[]:{})}tr(l,u,c),l=l[u]}return t}var Zr=Nn?function(t,e){return Nn.set(t,e),t}:il,Xr=ue?function(t,e){return ue(t,"toString",{configurable:!0,enumerable:!1,value:el(e),writable:!0})}:il;function ti(t){return Oo(Ua(t))}function ei(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=r(o);++i<o;)s[i]=t[i+e];return s}function ni(t,e){var n;return hr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ri(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!ua(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return ii(t,e,il,n)}function ii(t,e,n,r){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,l=null===e,u=ua(e),c=e===i;o<s;){var h=hn((o+s)/2),d=n(t[h]),f=d!==i,p=null===d,_=d==d,g=ua(d);if(a)var m=r||_;else m=c?_&&(r||f):l?_&&f&&(r||!p):u?_&&f&&!p&&(r||!g):!p&&!g&&(r?d<=e:d<e);m?o=h+1:s=h}return vn(s,4294967294)}function oi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!Us(a,l)){var l=a;o[i++]=0===s?0:s}}return o}function si(t){return"number"==typeof t?t:ua(t)?d:+t}function ai(t){if("string"==typeof t)return t;if(Hs(t))return Ee(t,ai)+"";if(ua(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function li(t,e,n){var r=-1,i=Te,o=t.length,s=!0,a=[],l=a;if(n)s=!1,i=Ie;else if(o>=200){var u=e?null:Yi(t);if(u)return nn(u);s=!1,i=He,l=new Yn}else l=e?[]:a;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,s&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),a.push(c)}else i(l,h,n)||(l!==a&&l.push(h),a.push(c))}return a}function ui(t,e){return null==(t=So(t,e=mi(e,t)))||delete t[Fo(Jo(e))]}function ci(t,e,n,r){return Jr(t,e,n(Cr(t,e)),r)}function hi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ei(t,r?0:o,r?o+1:i):ei(t,r?o+1:0,r?i:o)}function di(t,e){var n=t;return n instanceof Wn&&(n=n.value()),ke(e,(function(t,e){return e.func.apply(e.thisArg,Se([t],e.args))}),n)}function fi(t,e,n){var i=t.length;if(i<2)return i?li(t[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=t[o],l=-1;++l<i;)l!=o&&(s[o]=cr(s[o]||a,t[l],e,n));return li(gr(s,1),e,n)}function pi(t,e,n){for(var r=-1,o=t.length,s=e.length,a={};++r<o;){var l=r<s?e[r]:i;n(a,t[r],l)}return a}function _i(t){return Ks(t)?t:[]}function gi(t){return"function"==typeof t?t:il}function mi(t,e){return Hs(t)?t:yo(t,e)?[t]:Mo(ya(t))}var vi=Kr;function yi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ei(t,e,n)}var bi=ce||function(t){return oe.clearTimeout(t)};function wi(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function Ci(t){var e=new t.constructor(t.byteLength);return new zt(e).set(new zt(t)),e}function Ti(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ii(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,s=ua(t),a=e!==i,l=null===e,u=e==e,c=ua(e);if(!l&&!c&&!s&&t>e||s&&a&&u&&!l&&!c||r&&a&&u||!n&&u||!o)return 1;if(!r&&!s&&!c&&t<e||c&&n&&o&&!r&&!s||l&&n&&o||!a&&o||!u)return-1}return 0}function Ei(t,e,n,i){for(var o=-1,s=t.length,a=n.length,l=-1,u=e.length,c=mn(s-a,0),h=r(u+c),d=!i;++l<u;)h[l]=e[l];for(;++o<a;)(d||o<s)&&(h[n[o]]=t[o]);for(;c--;)h[l++]=t[o++];return h}function Si(t,e,n,i){for(var o=-1,s=t.length,a=-1,l=n.length,u=-1,c=e.length,h=mn(s-l,0),d=r(h+c),f=!i;++o<h;)d[o]=t[o];for(var p=o;++u<c;)d[p+u]=e[u];for(;++a<l;)(f||o<s)&&(d[p+n[a]]=t[o++]);return d}function ki(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function xi(t,e,n,r){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var l=e[s],u=r?r(n[l],t[l],l,n,t):i;u===i&&(u=t[l]),o?ir(n,l,u):tr(n,l,u)}return n}function Ni(t,e){return function(n,r){var i=Hs(n)?ve:nr,o=e?e():{};return i(n,t,so(r,2),o)}}function Ri(t){return Kr((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=t.length>3&&"function"==typeof s?(o--,s):i,a&&vo(n[0],n[1],a)&&(s=o<3?i:s,o=1),e=It(e);++r<o;){var l=n[r];l&&t(e,l,r,s)}return e}))}function Pi(t,e){return function(n,r){if(null==n)return n;if(!Ys(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=It(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Di(t){return function(e,n,r){for(var i=-1,o=It(e),s=r(e),a=s.length;a--;){var l=s[t?a:++i];if(!1===n(o[l],l,o))break}return e}}function Ai(t){return function(e){var n=Ze(e=ya(e))?sn(e):i,r=n?n[0]:e.charAt(0),o=n?yi(n,1).join(""):e.slice(1);return r[t]()+o}}function Oi(t){return function(e){return ke(Za(Ba(e).replace(Bt,"")),t,"")}}function $i(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=qn(t.prototype),r=t.apply(n,e);return ea(r)?r:n}}function Li(t){return function(e,n,r){var o=It(e);if(!Ys(e)){var s=so(n,3);e=Da(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,r);return a>-1?o[s?e[a]:a]:i}}function Mi(t){return to((function(e){var n=e.length,r=n,s=zn.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new kt(o);if(s&&!l&&"wrapper"==io(a))var l=new zn([],!0)}for(r=l?r:n;++r<n;){var u=io(a=e[r]),c="wrapper"==u?ro(a):i;l=c&&bo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[io(c[0])].apply(l,c[3]):1==a.length&&bo(a)?l[u]():l.thru(a)}return function(){var t=arguments,r=t[0];if(l&&1==t.length&&Hs(r))return l.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Fi(t,e,n,o,s,a,l,c,h,d){var f=e&u,p=1&e,_=2&e,g=24&e,m=512&e,v=_?i:$i(t);return function i(){for(var u=arguments.length,y=r(u),b=u;b--;)y[b]=arguments[b];if(g)var w=oo(i),C=Ke(y,w);if(o&&(y=Ei(y,o,s,g)),a&&(y=Si(y,a,l,g)),u-=C,g&&u<d){var T=en(y,w);return Hi(t,e,Fi,i.placeholder,n,y,T,c,h,d-u)}var I=p?n:this,E=_?I[t]:t;return u=y.length,c?y=ko(y,c):m&&u>1&&y.reverse(),f&&h<u&&(y.length=h),this&&this!==oe&&this instanceof i&&(E=v||$i(E)),E.apply(I,y)}}function ji(t,e){return function(n,r){return function(t,e,n,r){return yr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function qi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ai(n),r=ai(r)):(n=si(n),r=si(r)),o=t(n,r)}return o}}function Ui(t){return to((function(e){return e=Ee(e,We(so())),Kr((function(n){var r=this;return t(e,(function(t){return me(t,r,n)}))}))}))}function zi(t,e){var n=(e=e===i?" ":ai(e)).length;if(n<2)return n?Yr(e,t):e;var r=Yr(e,cn(t/on(e)));return Ze(e)?yi(sn(r),0,t).join(""):r.slice(0,t)}function Wi(t){return function(e,n,o){return o&&"number"!=typeof o&&vo(e,n,o)&&(n=o=i),e=pa(e),n===i?(n=e,e=0):n=pa(n),function(t,e,n,i){for(var o=-1,s=mn(cn((e-t)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=t,t+=n;return a}(e,n,o=o===i?e<n?1:-1:pa(o),t)}}function Bi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ma(e),n=ma(n)),t(e,n)}}function Hi(t,e,n,r,o,s,a,u,c,h){var d=8&e;e|=d?l:64,4&(e&=~(d?64:l))||(e&=-4);var f=[t,e,o,d?s:i,d?a:i,d?i:s,d?i:a,u,c,h],p=n.apply(i,f);return bo(t)&&No(p,f),p.placeholder=r,Do(p,t,e)}function Vi(t){var e=Tt[t];return function(t,n){if(t=ma(t),(n=null==n?0:vn(_a(n),292))&&pn(t)){var r=(ya(t)+"e").split("e");return+((r=(ya(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Yi=Sn&&1/nn(new Sn([,-0]))[1]==c?function(t){return new Sn(t)}:ul;function Ki(t){return function(e){var n=fo(e);return n==C?Xe(e):n==k?rn(e):function(t,e){return Ee(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Gi(t,e,n,s,c,h,d,f){var p=2&e;if(!p&&"function"!=typeof t)throw new kt(o);var _=s?s.length:0;if(_||(e&=-97,s=c=i),d=d===i?d:mn(_a(d),0),f=f===i?f:_a(f),_-=c?c.length:0,64&e){var g=s,m=c;s=c=i}var v=p?i:ro(t),y=[t,e,n,s,c,g,m,h,d,f];if(v&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=r==u&&8==n||r==u&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var l=e[3];if(l){var c=t[3];t[3]=c?Ei(c,l,e[4]):l,t[4]=c?en(t[3],a):e[4]}(l=e[5])&&(c=t[5],t[5]=c?Si(c,l,e[6]):l,t[6]=c?en(t[5],a):e[6]),(l=e[7])&&(t[7]=l),r&u&&(t[8]=null==t[8]?e[8]:vn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(y,v),t=y[0],e=y[1],n=y[2],s=y[3],c=y[4],!(f=y[9]=y[9]===i?p?0:t.length:mn(y[9]-_,0))&&24&e&&(e&=-25),e&&1!=e)b=8==e||16==e?function(t,e,n){var o=$i(t);return function s(){for(var a=arguments.length,l=r(a),u=a,c=oo(s);u--;)l[u]=arguments[u];var h=a<3&&l[0]!==c&&l[a-1]!==c?[]:en(l,c);return(a-=h.length)<n?Hi(t,e,Fi,s.placeholder,i,l,h,i,i,n-a):me(this&&this!==oe&&this instanceof s?o:t,this,l)}}(t,e,f):e!=l&&33!=e||c.length?Fi.apply(i,y):function(t,e,n,i){var o=1&e,s=$i(t);return function e(){for(var a=-1,l=arguments.length,u=-1,c=i.length,h=r(c+l),d=this&&this!==oe&&this instanceof e?s:t;++u<c;)h[u]=i[u];for(;l--;)h[u++]=arguments[++a];return me(d,o?n:this,h)}}(t,e,n,s);else var b=function(t,e,n){var r=1&e,i=$i(t);return function e(){return(this&&this!==oe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Do((v?Zr:No)(b,y),t,e)}function Qi(t,e,n,r){return t===i||Us(t,Rt[n])&&!At.call(r,n)?e:t}function Ji(t,e,n,r,o,s){return ea(t)&&ea(e)&&(s.set(e,t),qr(t,e,i,Ji,s),s.delete(e)),t}function Zi(t){return oa(t)?i:t}function Xi(t,e,n,r,o,s){var a=1&n,l=t.length,u=e.length;if(l!=u&&!(a&&u>l))return!1;var c=s.get(t),h=s.get(e);if(c&&h)return c==e&&h==t;var d=-1,f=!0,p=2&n?new Yn:i;for(s.set(t,e),s.set(e,t);++d<l;){var _=t[d],g=e[d];if(r)var m=a?r(g,_,d,e,t,s):r(_,g,d,t,e,s);if(m!==i){if(m)continue;f=!1;break}if(p){if(!Ne(e,(function(t,e){if(!He(p,e)&&(_===t||o(_,t,n,r,s)))return p.push(e)}))){f=!1;break}}else if(_!==g&&!o(_,g,n,r,s)){f=!1;break}}return s.delete(t),s.delete(e),f}function to(t){return Po(Eo(t,i,Vo),t+"")}function eo(t){return Tr(t,Da,co)}function no(t){return Tr(t,Aa,ho)}var ro=Nn?function(t){return Nn.get(t)}:ul;function io(t){for(var e=t.name+"",n=Rn[e],r=At.call(Rn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function oo(t){return(At.call(jn,"placeholder")?jn:t).placeholder}function so(){var t=jn.iteratee||ol;return t=t===ol?Or:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function lo(t){for(var e=Da(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,To(i)]}return e}function uo(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Ar(n)?n:i}var co=dn?function(t){return null==t?[]:(t=It(t),Ce(dn(t),(function(e){return te.call(t,e)})))}:gl,ho=dn?function(t){for(var e=[];t;)Se(e,co(t)),t=Vt(t);return e}:gl,fo=Ir;function po(t,e,n){for(var r=-1,i=(e=mi(e,t)).length,o=!1;++r<i;){var s=Fo(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ta(i)&&mo(s,i)&&(Hs(t)||Bs(t))}function _o(t){return"function"!=typeof t.constructor||Co(t)?{}:qn(Vt(t))}function go(t){return Hs(t)||Bs(t)||!!(ie&&t&&t[ie])}function mo(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&mt.test(t))&&t>-1&&t%1==0&&t<e}function vo(t,e,n){if(!ea(n))return!1;var r=typeof e;return!!("number"==r?Ys(n)&&mo(e,n.length):"string"==r&&e in n)&&Us(n[e],t)}function yo(t,e){if(Hs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ua(t))||X.test(t)||!Z.test(t)||null!=e&&t in It(e)}function bo(t){var e=io(t),n=jn[e];if("function"!=typeof n||!(e in Wn.prototype))return!1;if(t===n)return!0;var r=ro(n);return!!r&&t===r[0]}(Tn&&fo(new Tn(new ArrayBuffer(1)))!=D||In&&fo(new In)!=C||En&&fo(En.resolve())!=E||Sn&&fo(new Sn)!=k||kn&&fo(new kn)!=R)&&(fo=function(t){var e=Ir(t),n=e==I?t.constructor:i,r=n?jo(n):"";if(r)switch(r){case Pn:return D;case Dn:return C;case An:return E;case On:return k;case $n:return R}return e});var wo=Pt?Zs:ml;function Co(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Rt)}function To(t){return t==t&&!ea(t)}function Io(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in It(n))}}function Eo(t,e,n){return e=mn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=mn(i.length-e,0),a=r(s);++o<s;)a[o]=i[e+o];o=-1;for(var l=r(e+1);++o<e;)l[o]=i[o];return l[e]=n(a),me(t,this,l)}}function So(t,e){return e.length<2?t:Cr(t,ei(e,0,-1))}function ko(t,e){for(var n=t.length,r=vn(e.length,n),o=ki(t);r--;){var s=e[r];t[r]=mo(s,n)?o[s]:i}return t}function xo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var No=Ao(Zr),Ro=Fe||function(t,e){return oe.setTimeout(t,e)},Po=Ao(Xr);function Do(t,e,n){var r=e+"";return Po(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ye(p,(function(n){var r="_."+n[0];e&n[1]&&!Te(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(at):[]}(r),n)))}function Ao(t){var e=0,n=0;return function(){var r=yn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Oo(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var s=Vr(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var $o,Lo,Mo=($o=$s((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(ct,"$1"):n||t)})),e}),(function(t){return 500===Lo.size&&Lo.clear(),t})),Lo=$o.cache,$o);function Fo(t){if("string"==typeof t||ua(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function jo(t){if(null!=t){try{return Dt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function qo(t){if(t instanceof Wn)return t.clone();var e=new zn(t.__wrapped__,t.__chain__);return e.__actions__=ki(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Uo=Kr((function(t,e){return Ks(t)?cr(t,gr(e,1,Ks,!0)):[]})),zo=Kr((function(t,e){var n=Jo(e);return Ks(n)&&(n=i),Ks(t)?cr(t,gr(e,1,Ks,!0),so(n,2)):[]})),Wo=Kr((function(t,e){var n=Jo(e);return Ks(n)&&(n=i),Ks(t)?cr(t,gr(e,1,Ks,!0),i,n):[]}));function Bo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:_a(n);return i<0&&(i=mn(r+i,0)),De(t,so(e,3),i)}function Ho(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=_a(n),o=n<0?mn(r+o,0):vn(o,r-1)),De(t,so(e,3),o,!0)}function Vo(t){return null!=t&&t.length?gr(t,1):[]}function Yo(t){return t&&t.length?t[0]:i}var Ko=Kr((function(t){var e=Ee(t,_i);return e.length&&e[0]===t[0]?xr(e):[]})),Go=Kr((function(t){var e=Jo(t),n=Ee(t,_i);return e===Jo(n)?e=i:n.pop(),n.length&&n[0]===t[0]?xr(n,so(e,2)):[]})),Qo=Kr((function(t){var e=Jo(t),n=Ee(t,_i);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?xr(n,i,e):[]}));function Jo(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Zo=Kr(Xo);function Xo(t,e){return t&&t.length&&e&&e.length?Br(t,e):t}var ts=to((function(t,e){var n=null==t?0:t.length,r=or(t,e);return Hr(t,Ee(e,(function(t){return mo(t,n)?+t:t})).sort(Ii)),r}));function es(t){return null==t?t:Cn.call(t)}var ns=Kr((function(t){return li(gr(t,1,Ks,!0))})),rs=Kr((function(t){var e=Jo(t);return Ks(e)&&(e=i),li(gr(t,1,Ks,!0),so(e,2))})),is=Kr((function(t){var e=Jo(t);return e="function"==typeof e?e:i,li(gr(t,1,Ks,!0),i,e)}));function os(t){if(!t||!t.length)return[];var e=0;return t=Ce(t,(function(t){if(Ks(t))return e=mn(t.length,e),!0})),Ue(e,(function(e){return Ee(t,Me(e))}))}function ss(t,e){if(!t||!t.length)return[];var n=os(t);return null==e?n:Ee(n,(function(t){return me(e,i,t)}))}var as=Kr((function(t,e){return Ks(t)?cr(t,e):[]})),ls=Kr((function(t){return fi(Ce(t,Ks))})),us=Kr((function(t){var e=Jo(t);return Ks(e)&&(e=i),fi(Ce(t,Ks),so(e,2))})),cs=Kr((function(t){var e=Jo(t);return e="function"==typeof e?e:i,fi(Ce(t,Ks),i,e)})),hs=Kr(os),ds=Kr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ss(t,n)}));function fs(t){var e=jn(t);return e.__chain__=!0,e}function ps(t,e){return e(t)}var _s=to((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return or(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Wn&&mo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ps,args:[o],thisArg:i}),new zn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),gs=Ni((function(t,e,n){At.call(t,n)?++t[n]:ir(t,n,1)})),ms=Li(Bo),vs=Li(Ho);function ys(t,e){return(Hs(t)?ye:hr)(t,so(e,3))}function bs(t,e){return(Hs(t)?be:dr)(t,so(e,3))}var ws=Ni((function(t,e,n){At.call(t,n)?t[n].push(e):ir(t,n,[e])})),Cs=Kr((function(t,e,n){var i=-1,o="function"==typeof e,s=Ys(t)?r(t.length):[];return hr(t,(function(t){s[++i]=o?me(e,t,n):Nr(t,e,n)})),s})),Ts=Ni((function(t,e,n){ir(t,n,e)}));function Is(t,e){return(Hs(t)?Ee:Mr)(t,so(e,3))}var Es=Ni((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ss=Kr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&vo(t,e[0],e[1])?e=[]:n>2&&vo(e[0],e[1],e[2])&&(e=[e[0]]),zr(t,gr(e,1),[])})),ks=Re||function(){return oe.Date.now()};function xs(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Gi(t,u,i,i,i,i,e)}function Ns(t,e){var n;if("function"!=typeof e)throw new kt(o);return t=_a(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Rs=Kr((function(t,e,n){var r=1;if(n.length){var i=en(n,oo(Rs));r|=l}return Gi(t,r,e,n,i)})),Ps=Kr((function(t,e,n){var r=3;if(n.length){var i=en(n,oo(Ps));r|=l}return Gi(e,r,t,n,i)}));function Ds(t,e,n){var r,s,a,l,u,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new kt(o);function _(e){var n=r,o=s;return r=s=i,h=e,l=t.apply(o,n)}function g(t){return h=t,u=Ro(v,e),d?_(t):l}function m(t){var n=t-c;return c===i||n>=e||n<0||f&&t-h>=a}function v(){var t=ks();if(m(t))return y(t);u=Ro(v,function(t){var n=e-(t-c);return f?vn(n,a-(t-h)):n}(t))}function y(t){return u=i,p&&r?_(t):(r=s=i,l)}function b(){var t=ks(),n=m(t);if(r=arguments,s=this,c=t,n){if(u===i)return g(c);if(f)return bi(u),u=Ro(v,e),_(c)}return u===i&&(u=Ro(v,e)),l}return e=ma(e)||0,ea(n)&&(d=!!n.leading,a=(f="maxWait"in n)?mn(ma(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),b.cancel=function(){u!==i&&bi(u),h=0,r=c=s=u=i},b.flush=function(){return u===i?l:y(ks())},b}var As=Kr((function(t,e){return ur(t,1,e)})),Os=Kr((function(t,e,n){return ur(t,ma(e)||0,n)}));function $s(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new kt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new($s.Cache||Vn),n}function Ls(t){if("function"!=typeof t)throw new kt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}$s.Cache=Vn;var Ms=vi((function(t,e){var n=(e=1==e.length&&Hs(e[0])?Ee(e[0],We(so())):Ee(gr(e,1),We(so()))).length;return Kr((function(r){for(var i=-1,o=vn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return me(t,this,r)}))})),Fs=Kr((function(t,e){var n=en(e,oo(Fs));return Gi(t,l,i,e,n)})),js=Kr((function(t,e){var n=en(e,oo(js));return Gi(t,64,i,e,n)})),qs=to((function(t,e){return Gi(t,256,i,i,i,e)}));function Us(t,e){return t===e||t!=t&&e!=e}var zs=Bi(Er),Ws=Bi((function(t,e){return t>=e})),Bs=Rr(function(){return arguments}())?Rr:function(t){return na(t)&&At.call(t,"callee")&&!te.call(t,"callee")},Hs=r.isArray,Vs=he?We(he):function(t){return na(t)&&Ir(t)==P};function Ys(t){return null!=t&&ta(t.length)&&!Zs(t)}function Ks(t){return na(t)&&Ys(t)}var Gs=fn||ml,Qs=de?We(de):function(t){return na(t)&&Ir(t)==v};function Js(t){if(!na(t))return!1;var e=Ir(t);return e==y||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!oa(t)}function Zs(t){if(!ea(t))return!1;var e=Ir(t);return e==b||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Xs(t){return"number"==typeof t&&t==_a(t)}function ta(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function ea(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function na(t){return null!=t&&"object"==typeof t}var ra=fe?We(fe):function(t){return na(t)&&fo(t)==C};function ia(t){return"number"==typeof t||na(t)&&Ir(t)==T}function oa(t){if(!na(t)||Ir(t)!=I)return!1;var e=Vt(t);if(null===e)return!0;var n=At.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Dt.call(n)==Mt}var sa=pe?We(pe):function(t){return na(t)&&Ir(t)==S},aa=_e?We(_e):function(t){return na(t)&&fo(t)==k};function la(t){return"string"==typeof t||!Hs(t)&&na(t)&&Ir(t)==x}function ua(t){return"symbol"==typeof t||na(t)&&Ir(t)==N}var ca=ge?We(ge):function(t){return na(t)&&ta(t.length)&&!!Zt[Ir(t)]},ha=Bi(Lr),da=Bi((function(t,e){return t<=e}));function fa(t){if(!t)return[];if(Ys(t))return la(t)?sn(t):ki(t);if(se&&t[se])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[se]());var e=fo(t);return(e==C?Xe:e==k?nn:Ua)(t)}function pa(t){return t?(t=ma(t))===c||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function _a(t){var e=pa(t),n=e%1;return e==e?n?e-n:e:0}function ga(t){return t?sr(_a(t),0,f):0}function ma(t){if("number"==typeof t)return t;if(ua(t))return d;if(ea(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ea(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=ze(t);var n=pt.test(t);return n||gt.test(t)?ne(t.slice(2),n?2:8):ft.test(t)?d:+t}function va(t){return xi(t,Aa(t))}function ya(t){return null==t?"":ai(t)}var ba=Ri((function(t,e){if(Co(e)||Ys(e))xi(e,Da(e),t);else for(var n in e)At.call(e,n)&&tr(t,n,e[n])})),wa=Ri((function(t,e){xi(e,Aa(e),t)})),Ca=Ri((function(t,e,n,r){xi(e,Aa(e),t,r)})),Ta=Ri((function(t,e,n,r){xi(e,Da(e),t,r)})),Ia=to(or),Ea=Kr((function(t,e){t=It(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&vo(e[0],e[1],o)&&(r=1);++n<r;)for(var s=e[n],a=Aa(s),l=-1,u=a.length;++l<u;){var c=a[l],h=t[c];(h===i||Us(h,Rt[c])&&!At.call(t,c))&&(t[c]=s[c])}return t})),Sa=Kr((function(t){return t.push(i,Ji),me($a,i,t)}));function ka(t,e,n){var r=null==t?i:Cr(t,e);return r===i?n:r}function xa(t,e){return null!=t&&po(t,e,kr)}var Na=ji((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Lt.call(e)),t[e]=n}),el(il)),Ra=ji((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Lt.call(e)),At.call(t,e)?t[e].push(n):t[e]=[n]}),so),Pa=Kr(Nr);function Da(t){return Ys(t)?Gn(t):$r(t)}function Aa(t){return Ys(t)?Gn(t,!0):function(t){if(!ea(t))return function(t){var e=[];if(null!=t)for(var n in It(t))e.push(n);return e}(t);var e=Co(t),n=[];for(var r in t)("constructor"!=r||!e&&At.call(t,r))&&n.push(r);return n}(t)}var Oa=Ri((function(t,e,n){qr(t,e,n)})),$a=Ri((function(t,e,n,r){qr(t,e,n,r)})),La=to((function(t,e){var n={};if(null==t)return n;var r=!1;e=Ee(e,(function(e){return e=mi(e,t),r||(r=e.length>1),e})),xi(t,no(t),n),r&&(n=ar(n,7,Zi));for(var i=e.length;i--;)ui(n,e[i]);return n})),Ma=to((function(t,e){return null==t?{}:function(t,e){return Wr(t,e,(function(e,n){return xa(t,n)}))}(t,e)}));function Fa(t,e){if(null==t)return{};var n=Ee(no(t),(function(t){return[t]}));return e=so(e),Wr(t,n,(function(t,n){return e(t,n[0])}))}var ja=Ki(Da),qa=Ki(Aa);function Ua(t){return null==t?[]:Be(t,Da(t))}var za=Oi((function(t,e,n){return e=e.toLowerCase(),t+(n?Wa(e):e)}));function Wa(t){return Ja(ya(t).toLowerCase())}function Ba(t){return(t=ya(t))&&t.replace(vt,Ge).replace(Ht,"")}var Ha=Oi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Va=Oi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ya=Ai("toLowerCase"),Ka=Oi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ga=Oi((function(t,e,n){return t+(n?" ":"")+Ja(e)})),Qa=Oi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ja=Ai("toUpperCase");function Za(t,e,n){return t=ya(t),(e=n?i:e)===i?function(t){return Gt.test(t)}(t)?function(t){return t.match(Yt)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var Xa=Kr((function(t,e){try{return me(t,i,e)}catch(t){return Js(t)?t:new wt(t)}})),tl=to((function(t,e){return ye(e,(function(e){e=Fo(e),ir(t,e,Rs(t[e],t))})),t}));function el(t){return function(){return t}}var nl=Mi(),rl=Mi(!0);function il(t){return t}function ol(t){return Or("function"==typeof t?t:ar(t,1))}var sl=Kr((function(t,e){return function(n){return Nr(n,t,e)}})),al=Kr((function(t,e){return function(n){return Nr(t,n,e)}}));function ll(t,e,n){var r=Da(e),i=wr(e,r);null!=n||ea(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=wr(e,Da(e)));var o=!(ea(n)&&"chain"in n&&!n.chain),s=Zs(t);return ye(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=ki(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Se([this.value()],arguments))})})),t}function ul(){}var cl=Ui(Ee),hl=Ui(we),dl=Ui(Ne);function fl(t){return yo(t)?Me(Fo(t)):function(t){return function(e){return Cr(e,t)}}(t)}var pl=Wi(),_l=Wi(!0);function gl(){return[]}function ml(){return!1}var vl,yl=qi((function(t,e){return t+e}),0),bl=Vi("ceil"),wl=qi((function(t,e){return t/e}),1),Cl=Vi("floor"),Tl=qi((function(t,e){return t*e}),1),Il=Vi("round"),El=qi((function(t,e){return t-e}),0);return jn.after=function(t,e){if("function"!=typeof e)throw new kt(o);return t=_a(t),function(){if(--t<1)return e.apply(this,arguments)}},jn.ary=xs,jn.assign=ba,jn.assignIn=wa,jn.assignInWith=Ca,jn.assignWith=Ta,jn.at=Ia,jn.before=Ns,jn.bind=Rs,jn.bindAll=tl,jn.bindKey=Ps,jn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Hs(t)?t:[t]},jn.chain=fs,jn.chunk=function(t,e,n){e=(n?vo(t,e,n):e===i)?1:mn(_a(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,l=r(cn(o/e));s<o;)l[a++]=ei(t,s,s+=e);return l},jn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},jn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Se(Hs(n)?ki(n):[n],gr(e,1))},jn.cond=function(t){var e=null==t?0:t.length,n=so();return t=e?Ee(t,(function(t){if("function"!=typeof t[1])throw new kt(o);return[n(t[0]),t[1]]})):[],Kr((function(n){for(var r=-1;++r<e;){var i=t[r];if(me(i[0],this,n))return me(i[1],this,n)}}))},jn.conforms=function(t){return function(t){var e=Da(t);return function(n){return lr(n,t,e)}}(ar(t,1))},jn.constant=el,jn.countBy=gs,jn.create=function(t,e){var n=qn(t);return null==e?n:rr(n,e)},jn.curry=function t(e,n,r){var o=Gi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},jn.curryRight=function t(e,n,r){var o=Gi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},jn.debounce=Ds,jn.defaults=Ea,jn.defaultsDeep=Sa,jn.defer=As,jn.delay=Os,jn.difference=Uo,jn.differenceBy=zo,jn.differenceWith=Wo,jn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=n||e===i?1:_a(e))<0?0:e,r):[]},jn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,0,(e=r-(e=n||e===i?1:_a(e)))<0?0:e):[]},jn.dropRightWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!0,!0):[]},jn.dropWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!0):[]},jn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&vo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=_a(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:_a(r))<0&&(r+=o),r=n>r?0:ga(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},jn.filter=function(t,e){return(Hs(t)?Ce:_r)(t,so(e,3))},jn.flatMap=function(t,e){return gr(Is(t,e),1)},jn.flatMapDeep=function(t,e){return gr(Is(t,e),c)},jn.flatMapDepth=function(t,e,n){return n=n===i?1:_a(n),gr(Is(t,e),n)},jn.flatten=Vo,jn.flattenDeep=function(t){return null!=t&&t.length?gr(t,c):[]},jn.flattenDepth=function(t,e){return null!=t&&t.length?gr(t,e=e===i?1:_a(e)):[]},jn.flip=function(t){return Gi(t,512)},jn.flow=nl,jn.flowRight=rl,jn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},jn.functions=function(t){return null==t?[]:wr(t,Da(t))},jn.functionsIn=function(t){return null==t?[]:wr(t,Aa(t))},jn.groupBy=ws,jn.initial=function(t){return null!=t&&t.length?ei(t,0,-1):[]},jn.intersection=Ko,jn.intersectionBy=Go,jn.intersectionWith=Qo,jn.invert=Na,jn.invertBy=Ra,jn.invokeMap=Cs,jn.iteratee=ol,jn.keyBy=Ts,jn.keys=Da,jn.keysIn=Aa,jn.map=Is,jn.mapKeys=function(t,e){var n={};return e=so(e,3),yr(t,(function(t,r,i){ir(n,e(t,r,i),t)})),n},jn.mapValues=function(t,e){var n={};return e=so(e,3),yr(t,(function(t,r,i){ir(n,r,e(t,r,i))})),n},jn.matches=function(t){return Fr(ar(t,1))},jn.matchesProperty=function(t,e){return jr(t,ar(e,1))},jn.memoize=$s,jn.merge=Oa,jn.mergeWith=$a,jn.method=sl,jn.methodOf=al,jn.mixin=ll,jn.negate=Ls,jn.nthArg=function(t){return t=_a(t),Kr((function(e){return Ur(e,t)}))},jn.omit=La,jn.omitBy=function(t,e){return Fa(t,Ls(so(e)))},jn.once=function(t){return Ns(2,t)},jn.orderBy=function(t,e,n,r){return null==t?[]:(Hs(e)||(e=null==e?[]:[e]),Hs(n=r?i:n)||(n=null==n?[]:[n]),zr(t,e,n))},jn.over=cl,jn.overArgs=Ms,jn.overEvery=hl,jn.overSome=dl,jn.partial=Fs,jn.partialRight=js,jn.partition=Es,jn.pick=Ma,jn.pickBy=Fa,jn.property=fl,jn.propertyOf=function(t){return function(e){return null==t?i:Cr(t,e)}},jn.pull=Zo,jn.pullAll=Xo,jn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Br(t,e,so(n,2)):t},jn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Br(t,e,i,n):t},jn.pullAt=ts,jn.range=pl,jn.rangeRight=_l,jn.rearg=qs,jn.reject=function(t,e){return(Hs(t)?Ce:_r)(t,Ls(so(e,3)))},jn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=so(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return Hr(t,i),n},jn.rest=function(t,e){if("function"!=typeof t)throw new kt(o);return Kr(t,e=e===i?e:_a(e))},jn.reverse=es,jn.sampleSize=function(t,e,n){return e=(n?vo(t,e,n):e===i)?1:_a(e),(Hs(t)?Jn:Qr)(t,e)},jn.set=function(t,e,n){return null==t?t:Jr(t,e,n)},jn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Jr(t,e,n,r)},jn.shuffle=function(t){return(Hs(t)?Zn:ti)(t)},jn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&vo(t,e,n)?(e=0,n=r):(e=null==e?0:_a(e),n=n===i?r:_a(n)),ei(t,e,n)):[]},jn.sortBy=Ss,jn.sortedUniq=function(t){return t&&t.length?oi(t):[]},jn.sortedUniqBy=function(t,e){return t&&t.length?oi(t,so(e,2)):[]},jn.split=function(t,e,n){return n&&"number"!=typeof n&&vo(t,e,n)&&(e=n=i),(n=n===i?f:n>>>0)?(t=ya(t))&&("string"==typeof e||null!=e&&!sa(e))&&!(e=ai(e))&&Ze(t)?yi(sn(t),0,n):t.split(e,n):[]},jn.spread=function(t,e){if("function"!=typeof t)throw new kt(o);return e=null==e?0:mn(_a(e),0),Kr((function(n){var r=n[e],i=yi(n,0,e);return r&&Se(i,r),me(t,this,i)}))},jn.tail=function(t){var e=null==t?0:t.length;return e?ei(t,1,e):[]},jn.take=function(t,e,n){return t&&t.length?ei(t,0,(e=n||e===i?1:_a(e))<0?0:e):[]},jn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=r-(e=n||e===i?1:_a(e)))<0?0:e,r):[]},jn.takeRightWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!1,!0):[]},jn.takeWhile=function(t,e){return t&&t.length?hi(t,so(e,3)):[]},jn.tap=function(t,e){return e(t),t},jn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new kt(o);return ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ds(t,e,{leading:r,maxWait:e,trailing:i})},jn.thru=ps,jn.toArray=fa,jn.toPairs=ja,jn.toPairsIn=qa,jn.toPath=function(t){return Hs(t)?Ee(t,Fo):ua(t)?[t]:ki(Mo(ya(t)))},jn.toPlainObject=va,jn.transform=function(t,e,n){var r=Hs(t),i=r||Gs(t)||ca(t);if(e=so(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ea(t)&&Zs(o)?qn(Vt(t)):{}}return(i?ye:yr)(t,(function(t,r,i){return e(n,t,r,i)})),n},jn.unary=function(t){return xs(t,1)},jn.union=ns,jn.unionBy=rs,jn.unionWith=is,jn.uniq=function(t){return t&&t.length?li(t):[]},jn.uniqBy=function(t,e){return t&&t.length?li(t,so(e,2)):[]},jn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?li(t,i,e):[]},jn.unset=function(t,e){return null==t||ui(t,e)},jn.unzip=os,jn.unzipWith=ss,jn.update=function(t,e,n){return null==t?t:ci(t,e,gi(n))},jn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ci(t,e,gi(n),r)},jn.values=Ua,jn.valuesIn=function(t){return null==t?[]:Be(t,Aa(t))},jn.without=as,jn.words=Za,jn.wrap=function(t,e){return Fs(gi(e),t)},jn.xor=ls,jn.xorBy=us,jn.xorWith=cs,jn.zip=hs,jn.zipObject=function(t,e){return pi(t||[],e||[],tr)},jn.zipObjectDeep=function(t,e){return pi(t||[],e||[],Jr)},jn.zipWith=ds,jn.entries=ja,jn.entriesIn=qa,jn.extend=wa,jn.extendWith=Ca,ll(jn,jn),jn.add=yl,jn.attempt=Xa,jn.camelCase=za,jn.capitalize=Wa,jn.ceil=bl,jn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ma(n))==n?n:0),e!==i&&(e=(e=ma(e))==e?e:0),sr(ma(t),e,n)},jn.clone=function(t){return ar(t,4)},jn.cloneDeep=function(t){return ar(t,5)},jn.cloneDeepWith=function(t,e){return ar(t,5,e="function"==typeof e?e:i)},jn.cloneWith=function(t,e){return ar(t,4,e="function"==typeof e?e:i)},jn.conformsTo=function(t,e){return null==e||lr(t,e,Da(e))},jn.deburr=Ba,jn.defaultTo=function(t,e){return null==t||t!=t?e:t},jn.divide=wl,jn.endsWith=function(t,e,n){t=ya(t),e=ai(e);var r=t.length,o=n=n===i?r:sr(_a(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},jn.eq=Us,jn.escape=function(t){return(t=ya(t))&&K.test(t)?t.replace(V,Qe):t},jn.escapeRegExp=function(t){return(t=ya(t))&&nt.test(t)?t.replace(et,"\\$&"):t},jn.every=function(t,e,n){var r=Hs(t)?we:fr;return n&&vo(t,e,n)&&(e=i),r(t,so(e,3))},jn.find=ms,jn.findIndex=Bo,jn.findKey=function(t,e){return Pe(t,so(e,3),yr)},jn.findLast=vs,jn.findLastIndex=Ho,jn.findLastKey=function(t,e){return Pe(t,so(e,3),br)},jn.floor=Cl,jn.forEach=ys,jn.forEachRight=bs,jn.forIn=function(t,e){return null==t?t:mr(t,so(e,3),Aa)},jn.forInRight=function(t,e){return null==t?t:vr(t,so(e,3),Aa)},jn.forOwn=function(t,e){return t&&yr(t,so(e,3))},jn.forOwnRight=function(t,e){return t&&br(t,so(e,3))},jn.get=ka,jn.gt=zs,jn.gte=Ws,jn.has=function(t,e){return null!=t&&po(t,e,Sr)},jn.hasIn=xa,jn.head=Yo,jn.identity=il,jn.includes=function(t,e,n,r){t=Ys(t)?t:Ua(t),n=n&&!r?_a(n):0;var i=t.length;return n<0&&(n=mn(i+n,0)),la(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ae(t,e,n)>-1},jn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:_a(n);return i<0&&(i=mn(r+i,0)),Ae(t,e,i)},jn.inRange=function(t,e,n){return e=pa(e),n===i?(n=e,e=0):n=pa(n),function(t,e,n){return t>=vn(e,n)&&t<mn(e,n)}(t=ma(t),e,n)},jn.invoke=Pa,jn.isArguments=Bs,jn.isArray=Hs,jn.isArrayBuffer=Vs,jn.isArrayLike=Ys,jn.isArrayLikeObject=Ks,jn.isBoolean=function(t){return!0===t||!1===t||na(t)&&Ir(t)==m},jn.isBuffer=Gs,jn.isDate=Qs,jn.isElement=function(t){return na(t)&&1===t.nodeType&&!oa(t)},jn.isEmpty=function(t){if(null==t)return!0;if(Ys(t)&&(Hs(t)||"string"==typeof t||"function"==typeof t.splice||Gs(t)||ca(t)||Bs(t)))return!t.length;var e=fo(t);if(e==C||e==k)return!t.size;if(Co(t))return!$r(t).length;for(var n in t)if(At.call(t,n))return!1;return!0},jn.isEqual=function(t,e){return Pr(t,e)},jn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Pr(t,e,i,n):!!r},jn.isError=Js,jn.isFinite=function(t){return"number"==typeof t&&pn(t)},jn.isFunction=Zs,jn.isInteger=Xs,jn.isLength=ta,jn.isMap=ra,jn.isMatch=function(t,e){return t===e||Dr(t,e,lo(e))},jn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Dr(t,e,lo(e),n)},jn.isNaN=function(t){return ia(t)&&t!=+t},jn.isNative=function(t){if(wo(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ar(t)},jn.isNil=function(t){return null==t},jn.isNull=function(t){return null===t},jn.isNumber=ia,jn.isObject=ea,jn.isObjectLike=na,jn.isPlainObject=oa,jn.isRegExp=sa,jn.isSafeInteger=function(t){return Xs(t)&&t>=-9007199254740991&&t<=h},jn.isSet=aa,jn.isString=la,jn.isSymbol=ua,jn.isTypedArray=ca,jn.isUndefined=function(t){return t===i},jn.isWeakMap=function(t){return na(t)&&fo(t)==R},jn.isWeakSet=function(t){return na(t)&&"[object WeakSet]"==Ir(t)},jn.join=function(t,e){return null==t?"":_n.call(t,e)},jn.kebabCase=Ha,jn.last=Jo,jn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=_a(n))<0?mn(r+o,0):vn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):De(t,$e,o,!0)},jn.lowerCase=Va,jn.lowerFirst=Ya,jn.lt=ha,jn.lte=da,jn.max=function(t){return t&&t.length?pr(t,il,Er):i},jn.maxBy=function(t,e){return t&&t.length?pr(t,so(e,2),Er):i},jn.mean=function(t){return Le(t,il)},jn.meanBy=function(t,e){return Le(t,so(e,2))},jn.min=function(t){return t&&t.length?pr(t,il,Lr):i},jn.minBy=function(t,e){return t&&t.length?pr(t,so(e,2),Lr):i},jn.stubArray=gl,jn.stubFalse=ml,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=Tl,jn.nth=function(t,e){return t&&t.length?Ur(t,_a(e)):i},jn.noConflict=function(){return oe._===this&&(oe._=Ft),this},jn.noop=ul,jn.now=ks,jn.pad=function(t,e,n){t=ya(t);var r=(e=_a(e))?on(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return zi(hn(i),n)+t+zi(cn(i),n)},jn.padEnd=function(t,e,n){t=ya(t);var r=(e=_a(e))?on(t):0;return e&&r<e?t+zi(e-r,n):t},jn.padStart=function(t,e,n){t=ya(t);var r=(e=_a(e))?on(t):0;return e&&r<e?zi(e-r,n)+t:t},jn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(ya(t).replace(rt,""),e||0)},jn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&vo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=pa(t),e===i?(e=t,t=0):e=pa(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=wn();return vn(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return Vr(t,e)},jn.reduce=function(t,e,n){var r=Hs(t)?ke:je,i=arguments.length<3;return r(t,so(e,4),n,i,hr)},jn.reduceRight=function(t,e,n){var r=Hs(t)?xe:je,i=arguments.length<3;return r(t,so(e,4),n,i,dr)},jn.repeat=function(t,e,n){return e=(n?vo(t,e,n):e===i)?1:_a(e),Yr(ya(t),e)},jn.replace=function(){var t=arguments,e=ya(t[0]);return t.length<3?e:e.replace(t[1],t[2])},jn.result=function(t,e,n){var r=-1,o=(e=mi(e,t)).length;for(o||(o=1,t=i);++r<o;){var s=null==t?i:t[Fo(e[r])];s===i&&(r=o,s=n),t=Zs(s)?s.call(t):s}return t},jn.round=Il,jn.runInContext=t,jn.sample=function(t){return(Hs(t)?Qn:Gr)(t)},jn.size=function(t){if(null==t)return 0;if(Ys(t))return la(t)?on(t):t.length;var e=fo(t);return e==C||e==k?t.size:$r(t).length},jn.snakeCase=Ka,jn.some=function(t,e,n){var r=Hs(t)?Ne:ni;return n&&vo(t,e,n)&&(e=i),r(t,so(e,3))},jn.sortedIndex=function(t,e){return ri(t,e)},jn.sortedIndexBy=function(t,e,n){return ii(t,e,so(n,2))},jn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ri(t,e);if(r<n&&Us(t[r],e))return r}return-1},jn.sortedLastIndex=function(t,e){return ri(t,e,!0)},jn.sortedLastIndexBy=function(t,e,n){return ii(t,e,so(n,2),!0)},jn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ri(t,e,!0)-1;if(Us(t[n],e))return n}return-1},jn.startCase=Ga,jn.startsWith=function(t,e,n){return t=ya(t),n=null==n?0:sr(_a(n),0,t.length),e=ai(e),t.slice(n,n+e.length)==e},jn.subtract=El,jn.sum=function(t){return t&&t.length?qe(t,il):0},jn.sumBy=function(t,e){return t&&t.length?qe(t,so(e,2)):0},jn.template=function(t,e,n){var r=jn.templateSettings;n&&vo(t,e,n)&&(e=i),t=ya(t),e=Ca({},e,r,Qi);var o,s,a=Ca({},e.imports,r.imports,Qi),l=Da(a),u=Be(a,l),c=0,h=e.interpolate||yt,d="__p += '",f=Et((e.escape||yt).source+"|"+h.source+"|"+(h===J?ht:yt).source+"|"+(e.evaluate||yt).source+"|$","g"),p="//# sourceURL="+(At.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Jt+"]")+"\n";t.replace(f,(function(e,n,r,i,a,l){return r||(r=i),d+=t.slice(c,l).replace(bt,Je),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+e.length,e})),d+="';\n";var _=At.call(e,"variable")&&e.variable;if(_){if(ut.test(_))throw new wt("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(z,""):d).replace(W,"$1").replace(B,"$1;"),d="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Xa((function(){return Ct(l,p+"return "+d).apply(i,u)}));if(g.source=d,Js(g))throw g;return g},jn.times=function(t,e){if((t=_a(t))<1||t>h)return[];var n=f,r=vn(t,f);e=so(e),t-=f;for(var i=Ue(r,e);++n<t;)e(n);return i},jn.toFinite=pa,jn.toInteger=_a,jn.toLength=ga,jn.toLower=function(t){return ya(t).toLowerCase()},jn.toNumber=ma,jn.toSafeInteger=function(t){return t?sr(_a(t),-9007199254740991,h):0===t?t:0},jn.toString=ya,jn.toUpper=function(t){return ya(t).toUpperCase()},jn.trim=function(t,e,n){if((t=ya(t))&&(n||e===i))return ze(t);if(!t||!(e=ai(e)))return t;var r=sn(t),o=sn(e);return yi(r,Ve(r,o),Ye(r,o)+1).join("")},jn.trimEnd=function(t,e,n){if((t=ya(t))&&(n||e===i))return t.slice(0,an(t)+1);if(!t||!(e=ai(e)))return t;var r=sn(t);return yi(r,0,Ye(r,sn(e))+1).join("")},jn.trimStart=function(t,e,n){if((t=ya(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=ai(e)))return t;var r=sn(t);return yi(r,Ve(r,sn(e))).join("")},jn.truncate=function(t,e){var n=30,r="...";if(ea(e)){var o="separator"in e?e.separator:o;n="length"in e?_a(e.length):n,r="omission"in e?ai(e.omission):r}var s=(t=ya(t)).length;if(Ze(t)){var a=sn(t);s=a.length}if(n>=s)return t;var l=n-on(r);if(l<1)return r;var u=a?yi(a,0,l).join(""):t.slice(0,l);if(o===i)return u+r;if(a&&(l+=u.length-l),sa(o)){if(t.slice(l).search(o)){var c,h=u;for(o.global||(o=Et(o.source,ya(dt.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var d=c.index;u=u.slice(0,d===i?l:d)}}else if(t.indexOf(ai(o),l)!=l){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+r},jn.unescape=function(t){return(t=ya(t))&&Y.test(t)?t.replace(H,ln):t},jn.uniqueId=function(t){var e=++Ot;return ya(t)+e},jn.upperCase=Qa,jn.upperFirst=Ja,jn.each=ys,jn.eachRight=bs,jn.first=Yo,ll(jn,(vl={},yr(jn,(function(t,e){At.call(jn.prototype,e)||(vl[e]=t)})),vl),{chain:!1}),jn.VERSION="4.17.21",ye(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){jn[t].placeholder=jn})),ye(["drop","take"],(function(t,e){Wn.prototype[t]=function(n){n=n===i?1:mn(_a(n),0);var r=this.__filtered__&&!e?new Wn(this):this.clone();return r.__filtered__?r.__takeCount__=vn(n,r.__takeCount__):r.__views__.push({size:vn(n,f),type:t+(r.__dir__<0?"Right":"")}),r},Wn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ye(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Wn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:so(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),ye(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Wn.prototype[t]=function(){return this[n](1).value()[0]}})),ye(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Wn.prototype[t]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(il)},Wn.prototype.find=function(t){return this.filter(t).head()},Wn.prototype.findLast=function(t){return this.reverse().find(t)},Wn.prototype.invokeMap=Kr((function(t,e){return"function"==typeof t?new Wn(this):this.map((function(n){return Nr(n,t,e)}))})),Wn.prototype.reject=function(t){return this.filter(Ls(so(t)))},Wn.prototype.slice=function(t,e){t=_a(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Wn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=_a(e))<0?n.dropRight(-e):n.take(e-t)),n)},Wn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Wn.prototype.toArray=function(){return this.take(f)},yr(Wn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=jn[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);o&&(jn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,l=e instanceof Wn,u=a[0],c=l||Hs(e),h=function(t){var e=o.apply(jn,Se([t],a));return r&&d?e[0]:e};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=s&&!d,_=l&&!f;if(!s&&c){e=_?e:new Wn(this);var g=t.apply(e,a);return g.__actions__.push({func:ps,args:[h],thisArg:i}),new zn(g,d)}return p&&_?t.apply(this,a):(g=this.thru(h),p?r?g.value()[0]:g.value():g)})})),ye(["pop","push","shift","sort","splice","unshift"],(function(t){var e=xt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);jn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Hs(i)?i:[],t)}return this[n]((function(n){return e.apply(Hs(n)?n:[],t)}))}})),yr(Wn.prototype,(function(t,e){var n=jn[e];if(n){var r=n.name+"";At.call(Rn,r)||(Rn[r]=[]),Rn[r].push({name:e,func:n})}})),Rn[Fi(i,2).name]=[{name:"wrapper",func:i}],Wn.prototype.clone=function(){var t=new Wn(this.__wrapped__);return t.__actions__=ki(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ki(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ki(this.__views__),t},Wn.prototype.reverse=function(){if(this.__filtered__){var t=new Wn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Wn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Hs(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=vn(e,t+s);break;case"takeRight":t=mn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,l=a-s,u=r?a:s-1,c=this.__iteratees__,h=c.length,d=0,f=vn(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return di(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var _=-1,g=t[u+=e];++_<h;){var m=c[_],v=m.iteratee,y=m.type,b=v(g);if(2==y)g=b;else if(!b){if(1==y)continue t;break t}}p[d++]=g}return p},jn.prototype.at=_s,jn.prototype.chain=function(){return fs(this)},jn.prototype.commit=function(){return new zn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===i&&(this.__values__=fa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},jn.prototype.plant=function(t){for(var e,n=this;n instanceof Un;){var r=qo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},jn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Wn){var e=t;return this.__actions__.length&&(e=new Wn(this)),(e=e.reverse()).__actions__.push({func:ps,args:[es],thisArg:i}),new zn(e,this.__chain__)}return this.thru(es)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return di(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,se&&(jn.prototype[se]=function(){return this}),jn}();oe._=un,(r=function(){return un}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},520:(t,e,n)=>{"use strict";n(486);var r=n(503),i=n(576),o=n(956),s=n(138);const a=[];let l;(0,r.ZF)(i.q);const u=(0,o.N8)(),c=(0,o.iH)(u,"comments/");(0,o.jM)(c,(t=>{t.forEach((t=>{l=t.val(),a.push(l)})),console.log((0,s.q)(a,1))}))},576:(t,e,n)=>{"use strict";n.d(e,{q:()=>r});const r={apiKey:"AIzaSyDuKD6Dd7FIL7MiPz1iqRNfzvQNljFGvg0",authDomain:"test-541e5.firebaseapp.com",databaseURL:"https://test-541e5-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"test-541e5",storageBucket:"test-541e5.appspot.com",messagingSenderId:"509696045552",appId:"1:509696045552:web:820b8a7e2786221302ed35"}},138:(t,e,n)=>{"use strict";n.d(e,{q:()=>d}),n(486);var r=n(503),i=n(576),o=n(956);n(915),(0,r.ZF)(i.q);const s=(0,o.N8)();(0,o.$o)(s),document.getElementById("reload-btn").addEventListener("click",(()=>{location.reload()}));const a=[],l=[],u=[];let c,h=!0;function d(t,e){const n=[];for(let r=0;r<t.length;r+=e){const i=t.slice(r,r+e);n.push(i)}return n}const f=(t,e,n)=>{for(let r=0;r<l.length;r++){const i=d(t[r],1);1==i[e]&&(n[0]+=1),2==i[e]&&(n[1]+=1),3==i[e]&&(n[2]+=1),4==i[e]&&(n[3]+=1),5==i[e]&&(n[4]+=1)}};function p(t){return"<strong>"+t+"</strong>"}const _=Array.from(document.querySelectorAll("[data]"));function g(t,e){return _.forEach((t=>{a.push(t)})),a[t].innerHTML=e+" "}const m=(0,o.iH)(s,"comments/");(0,o.jM)(m,(t=>{t.forEach((t=>{const e=t.val();u.push(e)}));const e=d(u,1);e.length;let n=document.getElementById("commentSection");e.forEach((t=>{let e=document.createElement("li");e.classList.add("comment"),e.innerText=JSON.stringify(t),n.appendChild(e)}))}));const v=(0,o.iH)(s,"answers/");(0,o.jM)(v,(t=>{if(t.forEach((t=>{const e=t.key,n=(0,o.iH)(s,"answers/"+e);(0,o.jM)(n,(t=>{t.forEach((t=>{t.key;const e=t.val();l.push(e)}))}))})),!0===h){c=null==l.length?0:l.length;e=p(c)+" -  spillere",document.getElementById("numberOfPlayers").innerHTML="<td class='data font-size'>"+e;let t=[0,0,0,0,0];f(l,0,t),g(0,p(t[0])+" veldig bra | "+p(t[1])+" Middels bra | "+p(t[2])+" Drlig | "+p(t[3])+" Veldig drlig.");let n=[0];f(l,1,n),g(1,p(n));let r=[0,0,0,0,0];f(l,2,r),g(2,p(r[0])+" Logiskt oppsett | "+p(r[1])+" Jeg Skjnte delvis | "+p(r[2])+" Jeg var usikker p hvor det startet | "+p(r[3])+" Jeg savnet flgende: kommentar boks");let i=[0,0,0,0,0];f(l,3,i),g(3,p(i[0])+" Mer aktiviteter | "+p(i[1])+" Flere spill | "+p(i[2])+" Mer historie | "+p(i[3])+" En guide | "+p(i[4])+" Mer informasjonsmatriell");let a=[0,0,0,0,0];f(l,4,a),g(4,p(a[0])+" ja | "+p(a[1])+" nei");let u=[0,0,0,0,0];f(l,5,u),g(5,p(u[0])+" ... | "+p(u[1])+" ...");let d=[0,0,0,0,0];f(l,6,d),g(6,p(d[0])+" ... | "+p(d[1])+" ...");let _=[0,0,0,0,0];f(l,7,_),g(7,p(_[0])+" ... | "+p(_[1])+" ...");let m=[0,0,0,0,0];f(l,8,m),g(8,p(m[0])+" ... | "+p(m[1])+" ...");let v=[0,0,0,0,0];f(l,9,v),g(9,p(v[0])+" ... | "+p(v[1])+" ..."),h=!1,(0,o.Sb)(s)}var e}))},222:()=>{$(document).ready((function(){var t=!1,e=function(){if($(window).width()<767&&!t)return t=!0,$("table.responsive").each((function(t,e){!function(t){t.wrap("<div class='table-wrapper' />");var e=t.clone();e.find("td:not(:first-child), th:not(:first-child)").css("display","none"),e.removeClass("responsive"),t.closest(".table-wrapper").append(e),e.wrap("<div class='pinned' />"),t.wrap("<div class='scrollable' />"),function(t,e){var n=t.find("tr"),r=e.find("tr"),i=[];n.each((function(t){$(this).find("th, td").each((function(){var e=$(this).outerHeight(!0);i[t]=i[t]||0,e>i[t]&&(i[t]=e)}))})),r.each((function(t){$(this).height(i[t])}))}(t,e)}($(e))})),!0;t&&$(window).width()>767&&(t=!1,$("table.responsive").each((function(t,e){var n;(n=$(e)).closest(".table-wrapper").find(".pinned").remove(),n.unwrap(),n.unwrap()})))};$(window).load(e),$(window).on("redraw",(function(){t=!1,e()})),$(window).on("resize",e)}))},238:(t,e,n)=>{"use strict";n.d(e,{Jn:()=>v,KN:()=>w,Mq:()=>b,Xd:()=>p,ZF:()=>y,qX:()=>_});var r=n(463),i=n(333),o=n(444);class s{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const a="@firebase/app",l="0.7.22",u=new i.Yd("@firebase/app"),c={[a]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},h=new Map,d=new Map;function f(t,e){try{t.container.addComponent(e)}catch(n){u.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function p(t){const e=t.name;if(d.has(e))return u.debug(`There were multiple attempts to register component ${e}.`),!1;d.set(e,t);for(const e of h.values())f(e,t);return!0}function _(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const g=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class m{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw g.create("app-deleted",{appName:this._name})}}const v="9.7.0";function y(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},e),i=n.name;if("string"!=typeof i||!i)throw g.create("bad-app-name",{appName:String(i)});const s=h.get(i);if(s){if((0,o.vZ)(t,s.options)&&(0,o.vZ)(n,s.config))return s;throw g.create("duplicate-app",{appName:i})}const a=new r.H0(i);for(const t of d.values())a.addComponent(t);const l=new m(t,n,a);return h.set(i,l),l}function b(t="[DEFAULT]"){const e=h.get(t);if(!e)throw g.create("no-app",{appName:t});return e}function w(t,e,n){var i;let o=null!==(i=c[t])&&void 0!==i?i:t;n&&(o+=`-${n}`);const s=o.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const t=[`Unable to register library "${o}" with version "${e}":`];return s&&t.push(`library name "${o}" contains illegal characters (whitespace or "/")`),s&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void u.warn(t.join(" "))}p(new r.wA(`${o}-version`,(()=>({library:o,version:e})),"VERSION"))}const C="firebase-heartbeat-store";let T=null;function I(){return T||(T=(0,o.X3)("firebase-heartbeat-database",1,((t,e)=>{0===e&&t.createObjectStore(C)})).catch((t=>{throw g.create("storage-open",{originalErrorMessage:t.message})}))),T}async function E(t,e){try{const n=(await I()).transaction(C,"readwrite"),r=n.objectStore(C);return await r.put(e,S(t)),n.complete}catch(t){throw g.create("storage-set",{originalErrorMessage:t.message})}}function S(t){return`${t.name}!${t.options.appId}`}class k{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new N(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=x();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=x(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),R(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),R(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=(0,o.L)(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function x(){return(new Date).toISOString().substring(0,10)}class N{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,o.hl)()&&(0,o.eu)().then((()=>!0)).catch((()=>!1))}async read(){return await this._canUseIndexedDBPromise&&await async function(t){try{return(await I()).transaction(C).objectStore(C).get(S(t))}catch(t){throw g.create("storage-get",{originalErrorMessage:t.message})}}(this.app)||{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return E(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return E(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function R(t){return(0,o.L)(JSON.stringify({version:2,heartbeats:t})).length}p(new r.wA("platform-logger",(t=>new s(t)),"PRIVATE")),p(new r.wA("heartbeat",(t=>new k(t)),"PRIVATE")),w(a,l,""),w(a,l,"esm2017"),w("fire-js","")},463:(t,e,n)=>{"use strict";n.d(e,{H0:()=>a,wA:()=>i});var r=n(444);class i{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const o="[DEFAULT]";class s{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new r.BH;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t="[DEFAULT]"){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t="[DEFAULT]"){return this.instances.has(t)}getOptions(t="[DEFAULT]"){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(r);return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===o?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var r;return n||null}normalizeInstanceIdentifier(t="[DEFAULT]"){return this.component?this.component.multipleInstances?t:o:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new s(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}},333:(t,e,n)=>{"use strict";n.d(e,{Yd:()=>u,in:()=>i});const r=[];var i;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(i||(i={}));const o={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},s=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=a[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class u{constructor(t){this.name=t,this._logLevel=s,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in i))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?o[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n(138),n(576),n(222),n(520)})();